{% set version = "3.0.1" %}
{% set sha256 = "d94b3b440ea64c564005f4eadceff8d502129dd22369f6045e40121ca383a6ca" %}
package:
  name: beagle-lib
  version: '{{version}}'

source:
  fn: beagle_release_2_1_2.tar.gz
  url: https://github.com/beagle-dev/beagle-lib/archive/v{{version}}.tar.gz
  patches: # [osx]
    - osx_jni.patch # [osx]
    - osx_ltdl.patch # [osx]

  sha256: '{{sha256}}'
build:
  number: 0

requirements:
  build:
    - gcc # [linux]
    - llvm # [osx]
    - autoconf 2.69 pl5.*
    - automake 1.15 pl5.*
    - libtool
    - openjdk
  run:
    - openjdk
    - libgcc # [linux]
    - libtool

test:
  commands:
    - test -f ${PREFIX}/lib/libhmsbeagle-jni.so # [linux]
    - test -f ${PREFIX}/lib/libhmsbeagle-jni.jnilib # [osx]

about:
  home: https://github.com/beagle-dev/beagle-lib
  license: GPL-3.0+
  summary: general purpose library for evaluating the likelihood of sequence evolution
    on trees
  license_family: GPL
