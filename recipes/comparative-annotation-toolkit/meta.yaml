{% set name = "Comparative-Annotation-Toolkit" %}
{% set version = "1.0" %}
{% set commit = "8d2540f742ad717731bf697fe9b7b67b7a8c78d7" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ComparativeGenomicsToolkit/Comparative-Annotation-Toolkit/archive/{{ commit }}.tar.gz
  sha256: 252fdcc282271ef2b93527d1cf306b6f3dc36714dbf181fa1914e8caaf5c3ab3

build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install --no-deps --ignore-installed -vv .

requirements:
  host:
    - python >=3.6
    - pip
  run:
    - python >=3.6
    - cactus >=1.0
    - pyfasta >=0.5.2
    - toil >=4.1.0
    - luigi >=2.5
    - seaborn >=0.9
    - pandas >=1.0
    - frozendict
    - configobj >=5.0
    - sqlalchemy >=1.0
    - ete3
    - pysam >=0.10
    - numpy >=1.10
    - scipy >=0.18.1
    - bx-python >=0.7.1
    - bcbio-gff
    - parasail-python
    - bamtools
    - samtools >=1.3
    - augustus >=3.3
    - exonerate
    - ucsc-fatotwobit
    - ucsc-gff3togenepred
    - ucsc-genepredtobed
    - ucsc-genepredtofakepsl
    - ucsc-bamtopsl
    - ucsc-transmappsltogenepred
    - ucsc-pslpostarget
    - ucsc-axtchain
    - ucsc-chainmergesort
    - ucsc-pslmap
    - ucsc-pslrecalcmatch
    - ucsc-pslmappostchain
    - ucsc-gtftogenepred
    - ucsc-genepredtogtf
    - ucsc-pslcheck
    - ucsc-pslcdnafilter
    - ucsc-clustergenes
    - ucsc-psltobigpsl
    - ucsc-bedsort
    - ucsc-bedtobigbed

test:
  imports:
    - cat
  commands:
    - luigi --module cat RunCat --local-scheduler --help | grep "RUNCAT_HAL" &> /dev/null

about:
  home: https://github.com/ComparativeGenomicsToolkit/Comparative-Annotation-Toolkit
  license: Apache 2.0
  license_family: APACHE
  license_file: LICENSE
  summary: 'A straightforward end-to-end pipeline that takes as input a HAL-format
            multiple whole genome alignment as well as a GFF3 file representing
            annotations on one high quality assembly in the HAL alignment, and
            produces a output GFF3 annotation on all target genomes chosen'

extra:
  identifiers:
    - doi:10.1101/231118
