{% set package = "matplotlib-nogui" %}
{% set name = "matplotlib" %}
{% set version = "2.0.2" %}


package:
  name: {{ package }}
  version: {{ version }}

source:
  url: https://github.com/{{ name }}/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: aebed23921562792b68b8ca355de5abc176af4424f1987e2fa95f65e5c5e7e89

build:
  number: 0

requirements:
  build:
    - pkg-config
    - python
    - numpy >=1.7.1
    - setuptools
    - python-dateutil >=1.1
    - pyparsing
    - libpng >=1.6.28,<1.7
    - pytz
    - freetype 2.7
    - cycler >=0.10
    - six
    - functools32  # [py27]
  run:
    - python
    - numpy >=1.7.1
    - setuptools
    - python-dateutil >=1.1
    - pyparsing
    - libpng >=1.6.28,<1.7
    - pytz
    - freetype 2.7
    - cycler >=0.10
    - six
    - functools32  # [py27]

test:
  requires:
    - pytest
  imports:
    # some modules
    - matplotlib
    - matplotlib.patches
    - matplotlib.lines
    - matplotlib.pyplot
    - matplotlib.backends.backend_pdf
    # binary libs
    - matplotlib._path
    - matplotlib._png
    - matplotlib.ft2font
    - matplotlib._qhull
    - matplotlib._cntr
    - matplotlib._tri
    - matplotlib._image
    - matplotlib._delaunay
    - matplotlib.ttconv
    - matplotlib.backends._tkagg
    - matplotlib._contour
    - matplotlib.backends._backend_agg
  commands:
    - python -c "import matplotlib.pyplot as p;p.plot([1,2]);p.savefig('t.pdf')"
    - python -c "import matplotlib.pyplot as p;p.plot([1,2]);p.savefig('t.png')"
    - python -c "import matplotlib.pyplot as p;p.plot([1,2]);p.savefig('t.svg')"

about:
  home: http://matplotlib.org/
  dev_url: https://github.com/matplotlib/matplotlib/
  license: PSF-based
  license_family: PSF
  license_file: LICENSE/LICENSE
  summary: Matplotlib without GUI dependencies
  description: |
    Matplotlib is a Python 2D plotting library which produces publication
    quality figures in a variety of hardcopy formats and interactive
    environments across platforms. Matplotlib can be used in Python scripts,
    the Python and IPython shell, the jupyter notebook, web application
    servers, and four graphical user interface toolkits.
    
    This package omits all GUI backends.
