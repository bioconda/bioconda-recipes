{% set version = "3.12.1" %}
{% set name = "bambu" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name }}/bioconductor-{{ name }}_{{ version }}_src_all.tar.gz
  md5: eb76e0eb33ae36711c82b0ea371ecd15

build:
  number: 1
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-bambu", max_pin="x.x") }}'

# Suggests: AnnotationDbi, Biostrings, rmarkdown, BiocFileCache, ggplot2, ComplexHeatmap, circlize, ggbio, gridExtra, knitr, testthat, BSgenome.Hsapiens.NCBI.GRCh38, TxDb.Hsapiens.UCSC.hg38.knownGene, ExperimentHub (>= 1.15.3), DESeq2, NanoporeRNASeq, purrr, apeglm, utils, DEXSeq
requirements:

  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make

  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-bsgenome >=1.78.0,<1.79.0
    - bioconductor-genomeinfodb >=1.46.0,<1.47.0
    - bioconductor-genomicalignments >=1.46.0,<1.47.0
    - bioconductor-genomicfeatures >=1.62.0,<1.63.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-rsamtools >=2.26.0,<2.27.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-data.table
    - r-dplyr
    - r-rcpp
    - r-rcpparmadillo
    - r-tidyr
    - r-xgboost
    - libblas
    - liblapack
    - zlib
    - liblzma-devel

  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-bsgenome >=1.78.0,<1.79.0
    - bioconductor-genomeinfodb >=1.46.0,<1.47.0
    - bioconductor-genomicalignments >=1.46.0,<1.47.0
    - bioconductor-genomicfeatures >=1.62.0,<1.63.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-rsamtools >=2.26.0,<2.27.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-data.table
    - r-dplyr
    - r-rcpp
    - r-rcpparmadillo
    - r-tidyr
    - r-xgboost

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3 + file LICENSE
  summary: Context-Aware Transcript Quantification from Long Read RNA-Seq data
  description: bambu is a R package for multi-sample transcript discovery and quantification using long read RNA-Seq data. You can use bambu after read alignment to obtain expression estimates for known and novel transcripts and genes. The output from bambu can directly be used for visualisation and downstream analysis such as differential gene expression or transcript usage.
  license_file: LICENSE

extra:
  additional-platforms:
    - linux-aarch64
  parent_recipe:
    name: bioconductor-bambu
    path: recipes/bioconductor-bambu
    version: 3.12.1

