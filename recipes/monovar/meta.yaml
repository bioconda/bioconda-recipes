{% set name = "MonoVar" %}
# MonoVar doesn't have versions, so I'm just freezing the commit 7b47571d85a377c425feea86f6e591ee832fe342 as 1.0.0
{% set version = "1.0.0" %}

package:
    name: {{ name|lower }}
    version: {{ version }}

source:
    git_url: https://bitbucket.org/hamimzafar/monovar.git
    git_rev: 7b47571d85a377c425feea86f6e591ee832fe342
    patches: 
        - samtools_from_conda.patch

build:
    script: python setup.py install
    number: 1
    skip: True # [not py27]

requirements:
    build:
        - python
        - setuptools
        - numpy ==1.8.1
        - scipy ==0.14.0
        - pysam ==0.8.3

    run:
        - python
        - numpy ==1.8.1
        - scipy ==0.14.0
        - pysam ==0.8.3
        - samtools ==0.1.19

# MonoVar does not provide the ref.fa used to generate the provided example test bam files, so no testing is possible with this version.
#test:
#    source_files:
#        - examples/filenames.txt
#        - examples/data_files/1S110_sorted.bam
#        - examples/data_files/1S110_sorted.bam.bai
#        - examples/data_files/1S111_sorted.bam
#        - examples/data_files/1S111_sorted.bam.bai
#        - examples/data_files/1S112_sorted.bam
#        - examples/data_files/1S112_sorted.bam.bai
#    commands:
#        - samtools mpileup -BQ0 -d10000 -f ref.fa -q 40 -b filenames.txt | monovar.py -p 0.002 -a 0.2 -t 0.05 -m 2 -f ref.fa -b filenames.txt -o output.vcf

about:
    home: https://bitbucket.org/hamimzafar/monovar
    license: not-specified
    summary: 'single cell joint genotyper'
