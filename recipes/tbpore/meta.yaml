{% set name = "tbpore" %}
{% set version = "0.1.0" %}
{% set repo_URL = "https://github.com/mbhall88/tbpore/" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: {{ repo_URL }}/archive/refs/tags/{{ version }}.tar.gz
  sha256: 5e7fa6c7b25dfdbd5fbd5970ac5584c27bcd912d21eea6eeebde16f12921ff15
  
build:
  number: 0
  skip: True #  [osx]

requirements:
  build:
    - poetry=1.1
  
  run:
    - "python>=3.8,<4.0" 
    - mykrobe=0.11
    - rasusa
    - samtools=1.13
    - bcftools=1.13
    - minimap2=2.22
    - seqkit=2.0.0
    - psdm=0.1.0

test:
  commands:
    - poetry run black --check .
    - poetry run isort --check .
    - poetry run flake8 . --extend-exclude=".venv/,pipelines/snakemake"
    - poetry run pytest -vv tests/
    - tbpore -h

about:
  home: {{ repo_URL }}
  license: MIT
  license_file: LICENSE
  summary: Mycobacterium tuberculosis genomic analysis from Nanopore sequencing data


extra:
  recipe-maintainers:
    - mbhall88
    - leoisl
