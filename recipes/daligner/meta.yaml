{% set name = "daligner" %}
  # DALIGNER author does not create versioned releases. This is the
  # recommended version format from the software README, based on date of
  # commit
{% set version = "2.0.20240118" %}
{% set commit = "335105d09ed94cbbdf44b48ed75b0a44b4d7fe25" %}
{% set sha256 = "e128d8c5a858e96bd3ebdae5ee1b0e803fda5150f9bbdfff01b1ff1881f52191" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/thegenemyers/DALIGNER/archive/{{ commit }}.tar.gz
  sha256: {{ sha256 }}
  patches:
    - 0001-Makefile.patch

build:
  number: 0
  run_exports:
    - {{ pin_subpackage(name, max_pin=None) }}

requirements:
  build:
    - make
    - {{ compiler('c') }}

test:
  commands:
    - daligner 2>&1 | grep 'Usage'
    - LAsort 2>&1 | grep 'Usage'
    - LAmerge 2>&1 | grep 'Usage'
    - LAshow 2>&1 | grep 'Usage'
    - LAcat 2>&1 | grep 'Usage'
    - LAsplit 2>&1 | grep 'Usage'
    - LAcheck 2>&1 | grep 'Usage'
    - HPC.daligner 2>&1 | grep 'Usage'

about:
  home: "https://github.com/thegenemyers/DALIGNER"
  license: Custom
  license_file: LICENSE
  summary: "DALIGNER: Find all significant local alignments between reads."
  dev_url: "https://github.com/thegenemyers/DALIGNER"
  doc_url: "https://github.com/thegenemyers/DALIGNER/blob/master/README.md"

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
