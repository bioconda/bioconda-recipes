{% set version = "1.4.0" %}
{% set name = "StabMap" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 6931bf1c774fe77824d8a9a091ab10ba

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-stabmap", max_pin="x.x") }}'
  noarch: generic

# Suggests: scran, scater, knitr, UpSetR, gridExtra, SingleCellMultiModal, BiocStyle, magrittr, testthat (>= 3.0.0), purrr, sparseMatrixStats
requirements:
  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocneighbors >=2.4.0,<2.5.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biocsingular >=1.26.0,<1.27.0
    - bioconductor-matrixgenerics >=1.22.0,<1.23.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-abind
    - r-base
    - r-igraph
    - r-mass
    - r-matrix
    - r-slam
  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocneighbors >=2.4.0,<2.5.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biocsingular >=1.26.0,<1.27.0
    - bioconductor-matrixgenerics >=1.22.0,<1.23.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-abind
    - r-base
    - r-igraph
    - r-mass
    - r-matrix
    - r-slam

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-2.0-only
  summary: Stabilised mosaic single cell data integration using unshared features
  description: StabMap performs single cell mosaic data integration by first building a mosaic data topology, and for each reference dataset, traverses the topology to project and predict data onto a common embedding. Mosaic data should be provided in a list format, with all relevant features included in the data matrices within each list object. The output of stabMap is a joint low-dimensional embedding taking into account all available relevant features. Expression imputation can also be performed using the StabMap embedding and any of the original data matrices for given reference and query cell lists.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

