{% set name = "ngs-toolkit" %}
{% set version = "0.19.3" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz"
  sha256: 420fe295c27cb4d14306ecddb91893a9c93cf713d1c86c5e8d4c858ed20f90b0

build:
  number: 0
  entry_points:
    - projectmanager = ngs_toolkit.project_manager:main
    - trackmanager = ngs_toolkit.track_manager:main
  noarch: python
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  host:
    - attmap >=0.12.9
    - cffi <1.13.0
    - divvy >=0.4.0
    - fastcluster
    - jinja2 >=2.10.1
    - matplotlib >=2.1.1,<3.1.1
    - natsort >=6.0.0
    - numpy >=1.15.0
    - pandas >=0.25.0
    - parmap >=1.5.1
    - patsy >=0.4.1
    - peppy >=0.22.2
    - pip
    - pybedtools >=0.7.10
    - pysam >=0.13
    - python >=3
    - requests >=2.21.0
    - rpy2 ==3.0.0
    - scikit-learn >=0.19.1
    - scipy >=1.0.0
    - seaborn >=0.9.0
    - setuptools_scm >=3.3.3
    - statsmodels >=0.8.0
    - tqdm >=4.19.5
    - tzlocal
  run:
    - attmap >=0.12.9
    - cffi <1.13.0
    - divvy >=0.4.0
    - fastcluster
    - jinja2 >=2.10.1
    - matplotlib >=2.1.1,<3.1.1
    - natsort >=6.0.0
    - numpy >=1.15.0
    - pandas >=0.25.0
    - parmap >=1.5.1
    - patsy >=0.4.1
    - peppy >=0.22.2
    - pybedtools >=0.7.10
    - pysam >=0.13
    - python >=3
    - requests >=2.21.0
    - rpy2 ==3.0.0
    - scikit-learn >=0.19.1
    - scipy >=1.0.0
    - seaborn >=0.9.0
    - setuptools_scm >=3.3.3
    - statsmodels >=0.8.0
    - tqdm >=4.19.5
    - tzlocal

test:
  imports:
    - ngs_toolkit
    - ngs_toolkit.demo
    - ngs_toolkit.recipes
    - ngs_toolkit.templates
    - ngs_toolkit.tests
  commands:
    - projectmanager --help
    - trackmanager --help
    - "{{ PYTHON }} -m ngs_toolkit.recipes.call_peaks --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.coverage --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.deseq2 --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.enrichr --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.generate_project --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.lola --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.merge_signal --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.ngs_analysis --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.region_enrichment --help"
    - "{{ PYTHON }} -m ngs_toolkit.recipes.resources --help"
  requires:
    - codacy-coverage
    - codecov
    - coverage >=4.5.2
    - pytest >=4.4.0
    - pytest-cov
    - pytest-xdist

about:
  home: "https://github.com/afrendeiro/toolkit"
  license: "GNU General Public v3 or later (GPLv3+)"
  license_family: GPL3
  license_file: LICENCE.txt
  summary: "A toolkit for NGS analysis with Python."
  doc_url: http://ngs-toolkit.readthedocs.io
  dev_url: https://github.com/afrendeiro/toolkit

extra:
  recipe-maintainers:
    - afrendeiro
