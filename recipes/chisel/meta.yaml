{% set name = "chisel" %}
{% set version = "1.1" %}

package:
  name: '{{ name|lower }}'
  version: '{{ version }}'

source:
  url: https://github.com/raphael-group/{{ name }}/archive/v{{ version }}.zip
  sha256: c02ec907a25f3043e672559eb7b1f6e68d3f4734baba61447baa6bd65a3a963f

build:
  noarch: python
  number: 0
  entry_points:
    - chisel = chisel.bin.chisel_main:main
    - chisel_nonormal = chisel.bin.chisel_nonormal:main
    - chisel_calling = chisel.bin.chisel_calling:main
    - chisel_cloning = chisel.bin.chisel_cloning:main
    - chisel_plotting = chisel.bin.chisel_plotting:main
    - chisel_pseudonormal = chisel.bin.chisel_pseudonormal:main
    - chisel_prep = chisel.bin.chisel_prep:main
    - chisel_bedding = chisel.bin.chisel_bedding:main
  script: {{ PYTHON }} -m pip install . --ignore-installed --no-deps -vv

requirements:
  host:
    - python <3
    - pip
  run:
    - python <3
    - numpy >=1.16.1
    - scipy >=1.2.1
    - pandas 
    - matplotlib-base
    - seaborn >=0.7.1, <=0.9.0
    - statsmodels<=0.10.1
    - samtools
    - bcftools
    - gawk
    - bwa
    - art

test:
  commands:
    - chisel -h
    - chisel_nonormal -h
    - chisel_calling -h
    - chisel_cloning -h
    - chisel_plotting -h
    - chisel_pseudonormal -h
    - chisel_prep -h
    - chisel_bedding -h

about:
  home: https://github.com/raphael-group/chisel
  license: BSD-3
  summary: "Copy-number Haplotype Inference in Single-cell by Evolutionary Links"
  description: |
    CHISEL is an algorithm to infer allele- and haplotype-specififc copy numbers in individual cells from low-coverage
    single-cell DNA sequencing data. Specifically, the current implementation of CHISEL has been designed to be diretly
    applied to ultra-low coverage single-cell DNA sequencing data from 10X Genomics CNV solution, however CHISEL will
    be adapted to the data generated by any other available technology (e.g. DLP+).
