{% set name = "chisel" %}
{% set version = "0.0.4" %}

package:
  name: '{{ name|lower }}'
  version: '{{ version }}'

source:
  url: https://github.com/raphael-group/{{ name }}/archive/v{{ version }}.zip
  sha256: 1e71fcc9c744d05599a769b567f14c86f0e1e3380dfe8c84b1beb116387afd4a

build:
  noarch: python
  number: 0
  entry_points:
    - chisel = bin.chisel:main
    - chisel_calling = bin.chisel_calling:main
    - chisel_cloning = bin.chisel_cloning:main
    - chisel_plotting = bin.chisel_plotting:main
    - chisel_pseudonormal = bin.chisel_pseudonormal:main
  script: {{ PYTHON }} -m pip install . --ignore-installed --no-deps -vv

requirements:
  host:
    - python <3
    - pip
  run:
    - python <3
    - numpy >=1.16.1
    - scipy >=1.2.1
    - pandas 
    - matplotlib-base
    - seaborn >=0.7.1
    - samtools
    - bcftools
    - gawk

test:
  commands:
    - chisel --help
    - chisel_calling --help
    - chisel_cloning --help
    - chisel_plotting --help
    - chisel_pseudonormal --help

about:
  home: https://github.com/raphael-group/chisel
  license: BSD-3
  summary: "Copy-number Haplotype Inference in Single-cell by Evolutionary Links"
  description: |
    CHISEL is an algorithm to infer allele- and haplotype-specififc copy numbers in individual cells from low-coverage
    single-cell DNA sequencing data. Specifically, the current implementation of CHISEL has been designed to be diretly
    applied to ultra-low coverage single-cell DNA sequencing data from 10X Genomics CNV solution, however CHISEL will
    be adapted to the data generated by any other available technology (e.g. DLP+).