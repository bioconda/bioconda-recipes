package:
  name: madre
  version: "0.0.4"  # Update as needed

source:
  url: https://github.com/lbcb-sci/MADRe/archive/refs/tags/v0.0.4.tar.gz
  sha256: 72b7309065933b195dd8a23e9ce0f9f54cad56c74d0e2a98c8d96f93e1595fdb

build:
  number: 0
  noarch: python
  script: |
    ls -l  # Just for debugging
    {{ PYTHON }} setup.py sdist
    pip install dist/*.tar.gz --no-deps --force-reinstall --no-cache-dir -vv

requirements:
  host:
    - python =3.10
    - pip
    - setuptools
  run:
    - python =3.10
    - scikit-learn
    - minimap2
    - flye
    - metamdbg
    - hairsplitter
    - seqkit

test:
  commands:
    - madre --help
    - read-classification --help
    - database-reduction --help
    - calculate-abundances --help

about:
  home: https://github.com/lbcb-sci/MADRe
  license: MIT
  license_file: LICENSE
  summary: "MADRe: Strain-level metagenomic classification through assembly-driven database reduction."
  description: |
    MADRe is a pipeline for metagenomic classification at strain-level using contig assembly and reference database reduction.

extra:
  recipe-maintainers:
    - jlipovac
