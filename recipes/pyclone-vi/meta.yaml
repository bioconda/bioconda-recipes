{% set name = "pyclone-vi" %}
{% set version = "0.2.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/Roth-Lab/pyclone-vi/archive/{{ version }}.tar.gz
  sha256: 30075cd218f299b0c8b35fd7200e3a2fa695795ee5e0364b76e247c2d09a643c

build:
  number: 0
  noarch: python
  script: "{{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir -vvv"
  entry_points:
    - pyclone-vi = pyclone_vi.cli:main
  run_exports:
    - {{ pin_subpackage('pyclone-vi', max_pin="x.x") }}

requirements:
  host:
    - python >=3.12
    - setuptools >=77.0.3
    - pip
  run:
    - python >=3.12
    - numba >=0.61.2
    - numpy >=2.0
    - scipy
    - click >=8.3
    - pandas >=2.2.2
    - h5py >=3.0
    - threadpoolctl >=3.6.0

test:
  imports:
    - pyclone_vi
  commands:
    - pyclone-vi --help
    - pyclone-vi fit --help
    - pyclone-vi write-results-file --help

about:
  home: https://github.com/Roth-Lab/pyclone-vi
  license: "GPL-3.0-or-later"
  license_file: "LICENSE.txt"
  summary: 'A fast method for inferring clonal population structure'
  license_family: GPL3
  dev_url: https://github.com/Roth-Lab/pyclone-vi

extra:
  recipe-maintainers:
    - aroth85
    - elhurtado
  identifiers:
    - doi:10.1186/s12859-020-03919-2
