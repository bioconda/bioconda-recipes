{% set version = "3.30.0" %}
{% set name = "CoGAPS" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 817a4f23456f4e780fd4bc4cf3003b9c

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-cogaps", max_pin="x.x") }}'

# Suggests: testthat, knitr, rmarkdown, BiocStyle, SeuratObject, BiocFileCache, xml2
requirements:

  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - automake
    - make

  host:
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-fgsea >=1.36.0,<1.37.0
    - bioconductor-rhdf5 >=2.54.0,<2.55.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-bh
    - r-cluster
    - r-dplyr
    - r-forcats
    - r-ggplot2
    - r-gplots
    - r-rcolorbrewer
    - r-rcpp
    - r-testthat
    - libblas
    - liblapack
    - zlib
    - liblzma-devel

  run:
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-fgsea >=1.36.0,<1.37.0
    - bioconductor-rhdf5 >=2.54.0,<2.55.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-bh
    - r-cluster
    - r-dplyr
    - r-forcats
    - r-ggplot2
    - r-gplots
    - r-rcolorbrewer
    - r-rcpp
    - r-testthat

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: BSD_3_clause + file LICENSE
  summary: Coordinated Gene Activity in Pattern Sets
  description: Coordinated Gene Activity in Pattern Sets (CoGAPS) implements a Bayesian MCMC matrix factorization algorithm, GAPS, and links it to gene set statistic methods to infer biological process activity.  It can be used to perform sparse matrix factorization on any data, and when this data represents biomolecules, to do gene set analysis.
  license_file: LICENSE

