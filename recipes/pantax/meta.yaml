{% set name = "pantax" %}
{% set version = "2.0.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  - url: https://github.com/LuoGroup2023/PanTax/releases/download/v{{ version }}/{{ name }}.tar.gz  
    sha256: 7353a1373e7f86b31dae8487f65bc55cf167951b3b26fb26c86b4d6a30d0b6f5

  - url: https://packages.gurobi.com/11.0/gurobi11.0.3_linux64.tar.gz # [not osx]
    sha256: 82a2c8671c234bbaa9dc64da22b1951abf41c62047fdf77004e65f24a91dfd13  # [not osx]
    folder: gurobi1103  # [not osx]

build:
  skip: True  # [osx]
  number: 0
  run_exports:
    - {{ pin_subpackage(name, max_pin="x") }}   

requirements:
  build:
    - {{ compiler('rust') }}
    - clang =19 # [linux] 
    - cmake
    - make
    - glpk
  host:
    - python ==3.10
    - pip
    - glpk
  run:
    - python =3.10
    - r-base >=4.2
    - glpk
    - samtools =1.19.2
    - bcftools =1.19
    - htslib =1.19.1
    - pggb =0.6.0
    - vg >=1.59
    - graphaligner =1.0.17 
    - sylph =0.6.1
    - hdf5 =1.10.5
    - pandas =2.2.0
    - tqdm
    - numpy =1.26.3
    - networkx =3.2.1
    - pyarrow =14.0.2

test:
  commands:
    - pantax -h

about:
  home: https://github.com/LuoGroup2023/PanTax
  license: GPL-3.0-or-later
  license_file: LICENSE
  license_family: GPL3
  summary: Strain-level metagenomic profiling using pangenome graphs with PanTax

extra:
  skip-lints:
    - should_be_noarch_python
