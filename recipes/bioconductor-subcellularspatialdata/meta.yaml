{% set version = "1.6.0" %}
{% set name = "SubcellularSpatialData" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/data/experiment/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 4f1ce0b473f994c73bbf0edd8b18118e

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-subcellularspatialdata", max_pin="x.x") }}'
  noarch: generic

# Suggests: BiocStyle, ExperimentHub, ggplot2, knitr, prettydoc, rmarkdown, testthat (>= 3.0.0)
requirements:
  host:
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - r-base
    - r-dplyr
    - r-hexbin
    - r-matrix
  run:
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - r-base
    - r-dplyr
    - r-hexbin
    - r-matrix
    - curl
    - bioconductor-data-packages >=20260107

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/data/experiment/html/{{ name }}.html
  license: GPL-3.0-or-later
  summary: Annotated spatial transcriptomics datasets from 10x Xenium, NanoString CosMx and BGI STOmics.
  description: This is a data package that hosts annotated sub-cellular localised datasets from the STOmics, Xenium and CosMx platforms. Specifically, it hosts datasets analysed in the publication Bhuva et. al, 2024 titled "Library size confounds biology in spatial transcriptomics data". Raw transcript detections are hosted and functions to convert them to SpatialExperiment objects have been implemented.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

