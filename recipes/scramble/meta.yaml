{% set name = "scramble" %}
{% set version = "0.1.1" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  git_url: https://github.com/GeneDx/{{ name }}.git
  git_rev: master

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
  host:
    - htslib
  run:
    - r-base
    - r-optparse
    - r-rblast
    - r-stringr
    - bioconductor-rsamtools

test:
  commands:
    - cluster_identifier -v
    - cluster_identifier validation/test.bam
    - >
      scramble.sh
      --cluster-file "$(pwd)/validation/test.clusters.txt"
      --out-name "$(pwd)/validation/test_conda"
      --ref "$(pwd)/validation/test.fa"
      --eval-dels
      --eval-meis
  source_files:
    - validation/test*

about:
  home: https://github.com/GeneDx/{{ name }}
  summary: Soft Clipped Read Alignment Mapper
  license: CC
  license_file: LICENSE

extra:
  identifiers:
    - doi:10.1038/s41436-020-0749-x
