{% set version = "2.2.2" %}

{% set system = "x64_linux" %}       # [linux and x86_64]
{% set system = "x64_mac" %}         # [osx and x86_64]
{% set system = "arm64_linux" %}     # [linux and aarch64]
{% set system = "arm64_mac" %}       # [osx and arm64]

{% set sha256 = "E4BCCEE6380B7C0BFB4746285D36AF52A9874B1CF66D62A8862E8579097B5E77" %}  # [linux and x86_64]
{% set sha256 = "BFB22576EEF88293AF4695D297B0B6D3CDDC726A882E09EF29BD4684A705977F" %}  # [osx and x86_64]
{% set sha256 = "62055ECAF81FAC76CFC05A8CD64EBA958D2C45350312556777DC4DB7355A802A" %}  # [linux and aarch64]
{% set sha256 = "6BA58753B1141A005E8A97BF581C1EADA5CEC6713A1F516518167F1DA71B820B" %}  # [osx and arm64]


package:
  name: kmer-db
  version: {{ version }}

build:
  number: 0
  run_exports:
  - {{ pin_subpackage('kmer-db', max_pin='x.x.x') }}
  script: |
    mkdir -p "${PREFIX}/bin"
    cp -v kmer-db "${PREFIX}/bin/" || { echo "Error: Failed to copy kmer-db binary"; exit 1; }


source:
  url: https://github.com/refresh-bio/kmer-db/releases/download/v{{ version }}/kmer-db-v{{ version }}-{{ system }}.tar.gz
  sha256: {{ sha256 }}

about:
  home: https://github.com/refresh-bio/kmer-db
  summary: "Kmer-db is a fast and memory-efficient tool for estimating evolutionary distances."
  license: GPL-3
  license_family: GPL
  license_file: LICENSE

test:
  commands:
    - kmer-db > /dev/null
    - kmer-db -help

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
  skip-lints:
    - should_be_noarch_generic
    - should_not_be_noarch_source

