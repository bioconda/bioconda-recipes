diff --git a/setup.py b/setup.py
index 4465048..c898801 100644
--- a/setup.py
+++ b/setup.py
@@ -239,9 +239,10 @@ def build_autotools(patch_m4=False):
             print("{} already exists! Skipping build.".format(binary))
         else:
             os.chdir(os.path.join(top,tdir))
+            subprocess.run('cp -rfv ${BUILD_PREFIX}/share/gnuconfig/config.* build-aux/', shell=True, executable="/bin/bash")
             CPPFLAGS=""
             if tool == 'm4' and patch_m4:
-                CPPFLAGS="CPPFLAGS=-D_IO_IN_BACKUP=0x100"
+                CPPFLAGS="CPPFLAGS=-D_IO_IN_BACKUP=0x100 -I${PREFIX}/include"
                 for filename in ['lib/freading.c', 'lib/fseeko.c', 'lib/fpurge.c', 'lib/freadahead.c', 'lib/fflush.c']:
                     with open(filename, "r") as source:
                         lines = source.readlines()
@@ -265,9 +266,11 @@ def build_autotools(patch_m4=False):
                 os.chdir(save_cwd)
                 return False
             print("making and installing {}".format(tool))
-            proc = subprocess.Popen([
-                'make', '-j', str(cpu_count()), 'install'
-                ], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
+            subprocess.run('cp -rf ${BUILD_PREFIX}/bin/make ${PREFIX}/bin/make', shell=True, executable="/bin/bash")
+            subprocess.run('export PATH=${PREFIX}/bin:${PATH}', shell=True, executable="/bin/bash")
+            proc = subprocess.run([
+                'make -j${CPU_COUNT} install',
+                ], shell=True, executable="/bin/bash", stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
             stdout,stderr = proc.communicate()
             if 0 != proc.returncode:
                 print(stdout)
