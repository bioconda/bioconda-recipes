{% set version = "1.0" %}
package:
  name: k8
  version: {{ version }}

source:
  url: https://github.com/attractivechaos/k8/releases/download/v{{ version }}/k8-{{ version }}.tar.bz2
  sha256: 61504dad2d63404bf523d3f8d0a8bfd72ec78aa7bd79bdf9291a4f629cfb9c02

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('k8', max_pin="x") }}
  string: h3f4af3b_4
requirements:
  build:
    - {{ compiler('cxx') }}
    - _libgcc_mutex >=0.1
    - _openmp_mutex >=4.5
    - binutils_impl_linux-aarch64 2.40 h870a726_0
    - binutils_linux-aarch64 2.40 h94bbfa1_2
    - gcc_impl_linux-aarch64 13.2.0 h5669b93_2
    - gcc_linux-aarch64 13.2.0 h6c935d3_2
    - gxx_impl_linux-aarch64 13.2.0 h5669b93_2
    - gxx_linux-aarch64 13.2.0 he36bc08_2
    - kernel-headers_linux-aarch64 4.14.214 h1cb168f_14
    - ld_impl_linux-aarch64 2.40 h2d8c526_0
    - libgcc-devel_linux-aarch64 13.2.0 h0a96a4f_2
    - libgcc-ng >=13.2.0
    - libgomp >=13.2.0
    - libsanitizer 13.2.0 h9a76618_2
    - libstdcxx-devel_linux-aarch64 13.2.0 h0a96a4f_2
    - libstdcxx-ng >=13.2.0
    - sysroot_linux-aarch64 2.26 h4744778_14
  host:
    - _libgcc_mutex >=0.1
    - _openmp_mutex >=4.5
    - libgcc-ng >=13.2.0
    - libgomp >=13.2.0
    - libstdcxx-ng >=13.2.0
    - zlib >=1.3.1
  run:
    - libgcc-ng >=13
    - libstdcxx-ng >=13
    - zlib >=1.3.1

test:
  commands:
    - k8 -v | grep '^K8'

about:
  home: https://github.com/attractivechaos/k8
  license: MIT
  summary: "Lightweight JavaScript shell based on Google's V8 JavaScript engine"

extra:
  additional-platforms:
    - linux-aarch64