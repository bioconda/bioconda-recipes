{% set version = "1.8.1" %}
{% set sha256 = "2c38201b5e04e9e0df621ba053bbad93d70dc9b23bd6e0b78a1f6b22315cc1c0" %}

package:
  name: diann
  version: {{ version }}

source:
  - url: https://github.com/vdemichev/DiaNN/releases/download/{{ version }}/diann_{{ version }}.deb
    sha256: {{ sha256 }}

build:
  number: 0
  binary_relocation: False
  missing_dso_whitelist:
    - /lib64/libpthread.so.0
    - /lib64/librt.so.1
    - /lib64/libstdc++.so.6
    - /lib64/libm.so.6
    - /lib64/libgcc_s.so.1
    - /lib64/libc.so.6
    - /lib64/ld-linux-x86-64.so.2
    - /lib64/libgomp.so.1

requirements:
  build:
    - {{ compiler('c') }}
    - libgomp
  run:
    - glib >=2.27
    - libgomp
test:
  commands:
    - ldd $(whereis diann-1.8.1 | awk '{print $2}') && diann-1.8.1 &&
    - ls /lib64/

about:
  home: https://github.com/vdemichev/DiaNN
  license: INDIVIDUAL
  license_file: '{{ RECIPE_DIR }}/LICENSE.txt'
  summary: 'DIA-NN - a universal automated software suite for DIA proteomics data analysis.'

extra:
  recipe-maintainers:
    - npinter