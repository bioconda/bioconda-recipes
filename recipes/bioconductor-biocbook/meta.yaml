{% set version = "1.8.0" %}
{% set name = "BiocBook" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: c25a6f865b8e9c8fee2936410996759e

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-biocbook", max_pin="x.x") }}'
  noarch: generic

# Suggests: BiocStyle, knitr, testthat (>= 3.0.0), rmarkdown
requirements:
  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - r-base
    - r-cli
    - r-dplyr
    - r-gert
    - r-gh
    - r-gitcreds
    - r-glue
    - r-httr
    - r-pak
    - r-purrr
    - r-quarto
    - r-renv
    - r-rlang
    - r-rprojroot
    - r-stringr
    - r-tibble
    - r-usethis
    - r-yaml
  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - r-base
    - r-cli
    - r-dplyr
    - r-gert
    - r-gh
    - r-gitcreds
    - r-glue
    - r-httr
    - r-pak
    - r-purrr
    - r-quarto
    - r-renv
    - r-rlang
    - r-rprojroot
    - r-stringr
    - r-tibble
    - r-usethis
    - r-yaml

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: MIT + file LICENSE
  summary: Write, containerize, publish and version Quarto books with Bioconductor
  description: A BiocBook can be created by authors (e.g. R developers, but also scientists, teachers, communicators, ...) who wish to 1) write (compile a body of biological and/or bioinformatics knowledge), 2) containerize (provide Docker images to reproduce the examples illustrated in the compendium), 3) publish (deploy an online book to disseminate the compendium), and 4) version (automatically generate specific online book versions and Docker images for specific Bioconductor releases).
  license_file: LICENSE

