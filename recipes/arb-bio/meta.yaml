{% set name = "ARB" %}
{% set version = "6.0.6" %}
{% set sha256 = "8b1fc3fd11bbb05aca4731ac8803c004a4f2b6b87c11b543660d07ea349a6c21" %}

package:
  name: {{ name|lower }}-bio
  version: {{ version }}

source:
  fn: {{name | lower }}-{{ version }}-source.tgz
  url: http://download.arb-home.de/release/{{ name|lower }}-{{ version }}/{{ name|lower }}-{{ version }}-source.tgz
  sha256: {{ sha256 }}
  patches:
   # allow disabling build of bundled tools
   - disable_pkgs.patch
   # do not create links for mafft
   - no_mafftlinks.patch
   # allow linking with missing symbols on macos
   - link_dyn.patch
   - make.patch
   # prefix SOURCE_TOOLS/... with full PATH
   - make_path_fix.patch
   # change all /usr/bin/xyz paths to /usr/bin/env xyz
   - abs_path_fix.patch
   # use sed, not gsed
   - gsed.patch

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - pkg-config
    - toolchain
    - openmotif-dev
    - glib
    - gettext
    - pthread-stubs
    - xorg-libxp
    - xorg-libxmu
    - xorg-libxi
    - xorg-libxaw
    - xorg-libxpm
    - xorg-makedepend
    - xorg-printproto # remove on fix openmotif?
    - xerces-c
    - libtiff
    - libxslt
    - perl
    - lynx
    - time
    - sed >=4.4 # we want the one from conda-forge
    - readline # for mrbayes

  run:
    - xorg-libxi
    - xorg-libxmu
    - xorg-libxp
    - xorg-libxaw
    - xorg-libxpm
    - glib
    - openmotif
    - gnuplot
    - muscle
    - mafft
    - raxml
    - phylip
    - fasttree
    - sed >=4.4
    - xfig
    - fig2dev
    - perl
    - readline # for mrbayes

test:
  commands:
    - conda inspect linkages -p $PREFIX $PKG_NAME  # [not win]
    - conda inspect objects -p $PREFIX $PKG_NAME  # [osx]

about:
  home: http://www.arb-home.de
  license: ARB
  licence_file: arb_LICENSE.txt
  summary: ARB 6 Sequence Analysis Suite
