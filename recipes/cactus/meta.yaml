package:
  name: cactus
  # Version prefixed with 0.0. since there is now an official
  # https://github.com/ComparativeGenomicsToolkit/cactus/releases/tag/v1.0.0
  # TODO: Old builds with 2019.03.01 may be moved off the main label.
  version: "2.9.9"

source:
  url: https://github.com/ComparativeGenomicsToolkit/cactus/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 8815298d3dfb6b39f005dda7e4f3aac70eafeb5286a735486c605dd13680b8c1

build:
  number: 0

requirements:
  build:
    - make
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}

  host:
    - pip
    - python
    - hdf5
    - openmp
    - libdeflate
    - decorator
    - networkx>=2,<2.8.1
    - cigar
    - biopython
    - pysam
    - toil
    - backports.zoneinfo  # [py39]
  run:
    - python
    - hdf5
    - libdeflate
    - decorator
    - networkx>=2,<2.8.1
    - cigar
    - biopython
    - pysam
    - toil
    - backports.zoneinfo  # [py39]
    - samtools
    - bcftools
    - parallel
    # These are from downloadPangenomeTools
    - minimap2
    - minigraph
    - gfatools
    #- dna-brnn
    #- cactus-gfa-tools
    - bedtools

test:
  commands:
    - cactus -h
    - hal2assemblyHub.py -h

about:
  home: https://github.com/ComparativeGenomicsToolkit/cactus
  license: MIT
  license_file: LICENSE.txt
  summary: 'Cactus is a reference-free whole-genome multiple alignment program based upon notion of Cactus graphs'
