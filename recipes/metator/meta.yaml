{% set name = "metator" %}
{% set version = "1.3.6" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/koszullab/metator/archive/refs/tags/v{{ version }}.tar.gz
  sha256: ec9c7d04099254bdcfacc5fa4f536fbcc775ba47f8d9c9fac628a1dc52d7374f

build:
  number: 0
  run_exports:
    - {{ pin_subpackage("metator", max_pin="x") }}
  entry_points:
    - metator=metator.main:main

requirements:
  build:
    - python >=3.9,<3.12
    - {{ compiler('cxx') }}
    - hatch
    - hatch-build-scripts
    - make
    - tar
  host:
    - python >=3.9,<3.12
    - hatch
    - hatch-build-scripts
  run:
    - python >=3.9,<3.12
    - hicstuff
    - networkx
    - checkv
    - biopython
    - pysam
    - pairtools
    - pyfastx
    - cooler
    - numpy
    - pandas
    - scikit-learn
    - scipy
    - seaborn
    - looseversion
    - micomplete
    - pairix
    - bowtie2
    - bwa
    - samtools
    - prodigal
    - hmmer
    - openjdk

test:
  imports:
    - metator
  commands:
    - metator --help
    - ls -l $(python -c "from metator import LOUVAIN_PATH; print(LOUVAIN_PATH)")
    - $(python -c "from metator import LOUVAIN_PATH; print(LOUVAIN_PATH)")/louvain -h
    - ls -l  $(python -c "from metator import LEIDEN_PATH; print(LEIDEN_PATH)")
    - java -cp $(python -c "from metator import LEIDEN_PATH; print(LEIDEN_PATH)") -h

about:
  home: https://github.com/koszullab/metator
  summary: "Metagenomic binning based on Hi-C data"
  license: "GPL-3.0-or-later"
  license_family: GPL3
  license_file: LICENSE
  doc_url: "https://www.frontiersin.org/journals/genetics/articles/10.3389/fgene.2019.00753/full"
  dev_url: "https://github.com/koszullab/metator"

extra:
  recipe-maintainers:
    - js2264
