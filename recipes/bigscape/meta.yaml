{% set version = "2.0.2" %}
{% set sha256 = "4d590853bfd3ac2bb00be2cf0b0dad5eefd064df1afc59602b7b3bdfae3240c9" %}

package:
  name: bigscape
  version: {{ version }}

source:
  url: https://github.com/medema-group/BiG-SCAPE/archive/refs/tags/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  noarch: python
  script: {{ PYTHON }} -m pip install --no-deps --no-build-isolation --no-cache-dir . -vvv
  entry_points:
    - bigscape = big_scape.__main__:main
  run_exports:
    - {{ pin_subpackage('bigscape', max_pin="x") }}

requirements:
  host:
    - python >=3.11
    - pip
    - hatchling
  run:
    - python >=3.11
    - biopython
    - sortedcontainers
    - fasttree
    - numpy
    - pandas
    - pyhmmer >=0.12.0
    - scikit-learn
    - scipy
    - sqlalchemy >=2.0.2
    - matplotlib-base
    - requests
    - tqdm
    - sourmash_plugin_branchwater
    - click
    - pyyaml
    - importlib-metadata
    - importlib_resources

test:
  commands:
    - bigscape --version

about:
  home: "https://github.com/medema-group/BiG-SCAPE"
  license: "AGPL-3.0-or-later"
  license_family: AGPL
  license_file: LICENSE
  summary: "Biosynthetic Genes Similarity Clustering and Prospecting Engine."
  doc_url: "https://github.com/medema-group/BiG-SCAPE/wiki"
  dev_url: "https://github.com/medema-group/BiG-SCAPE"

extra:
  identifiers:
    - doi:10.1038/s41589-019-0400-9
