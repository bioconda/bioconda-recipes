{% set name = "unicore" %}
{% set version = "1.0.0" %}
{% set sha256 = "7e82886e802358acfe37ef100070a54fdfaef8e3c7e6703c11cb3d36006a85ff" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/steineggerlab/unicore/archive/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('unicore', max_pin="x") }}

requirements:
  build:
    - {{ compiler('rust') }}
    - cargo-bundle-licenses
    # - {{ compiler('c') }} add these C/C++ compilers if needed
    # - {{ compiler('cxx') }}
  host:
    - openssl
  run:
    - cudatoolkit <=11.7
    - pytorch-gpu
    - transformers
    - sentencepiece
    - protobuf
    - foldseek >=9.427df8a
    - foldmason
    - mafft
    - iqtree
    - fasttree
    - raxml

test:
  commands:
    - unicore help

about:
  home: https://github.com/steineggerlab/unicore
  license: GNU General Public v3
  license_family: GPL3
  license_file:
    - LICENSE         # the license file for your package
    - THIRDPARTY.yml  # this file is generated by cargo-bundle-licenses
  summary: Universal and efficient core gene phylogeny with Foldseek and ProstT5

extra:
  recipe-maintainers:
    - endixk
    - pskvins
