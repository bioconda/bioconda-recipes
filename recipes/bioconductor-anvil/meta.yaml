{% set version = "1.22.3" %}
{% set name = "AnVIL" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 22a5be12dbf6aa910cb0104b46c6292f

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-anvil", max_pin="x.x") }}'
  noarch: generic

# Suggests: knitr, rmarkdown, testthat, withr, readr, BiocStyle, devtools, AnVILAz, AnVILGCP, lifecycle
requirements:
  host:
    - bioconductor-anvilbase >=1.4.0,<1.5.0
    - bioconductor-biocbaseutils >=1.12.0,<1.13.0
    - bioconductor-gcptools >=1.0.0,<1.1.0
    - r-base
    - r-dplyr
    - r-dt
    - r-futile.logger
    - r-htmltools
    - r-httr
    - r-jsonlite
    - r-miniui
    - r-rapiclient
    - r-shiny
    - r-tibble
    - r-yaml
  run:
    - bioconductor-anvilbase >=1.4.0,<1.5.0
    - bioconductor-biocbaseutils >=1.12.0,<1.13.0
    - bioconductor-gcptools >=1.0.0,<1.1.0
    - r-base
    - r-dplyr
    - r-dt
    - r-futile.logger
    - r-htmltools
    - r-httr
    - r-jsonlite
    - r-miniui
    - r-rapiclient
    - r-shiny
    - r-tibble
    - r-yaml

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: Artistic-2.0
  summary: Bioconductor on the AnVIL compute environment
  description: The AnVIL is a cloud computing resource developed in part by the National Human Genome Research Institute. The AnVIL package provides programatic access to the Dockstore, Leonardo, Rawls, TDR, and Terra RESTful programming interfaces. For platform-specific user-level functionality, see either the AnVILGCP or AnVILAz package.

