{% set version = "2.2.2" %}
{% set name = "hisat2" %}
package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/DaehwanKimLab/hisat2/archive/v{{ version }}.tar.gz
  sha256: d3996d7bee30e38e51beb69c44b10461a4692e686487c465f9a20e3f54b6e815
  patches:
    - 0001-Rename-VERSION-to-VERSION.txt.patch
    - simde-mr-c.patch

build:
  number: 0
  run_exports: '{{ pin_subpackage(name,  max_pin="x") }}'
  
requirements:
  build:
    - make
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
  host:
  run:
    - python >3.5
    - perl

test:
  commands:
    - hisat2 --help | grep -F {{ version }}

about:
  home: http://daehwankimlab.github.io/hisat2
  license: GPL-3.0
  license_family: GPL
  license_file: LICENSE
  summary: "Graph-based alignment of next generation sequencing reads to a population of genomes."
  description: "HISAT2 is a fast and sensitive alignment program for mapping next-generation sequencing reads (both DNA and RNA) to a population of human genomes as well as to a single reference genome."
  doc_url: https://daehwankimlab.github.io/hisat2/manual/
  dev_url: https://github.com/DaehwanKimLab/hisat2

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
    
  identifiers:
    - biotools:HISAT2
    - doi:10.1038/nmeth.3317
    - doi:10.1038/s41587-019-0201-4
    - usegalaxy-eu:hisat2
  notes: "Pre-built indices for HISAT2 can be downloaded from https://daehwankimlab.github.io/hisat2/download/."
