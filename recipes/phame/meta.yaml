{% set name = "phame" %}
{% set version = "1.0.3" %}
{% set hash = "026b5c54ff9fe121fefd222dc2f9912da34a9395a04d26f7e468aca5adcd1703" %}

package:
  name: {{ name }}
  version: "{{ version }}"

source:
  sha256: {{ hash }}
  url: https://github.com/mshakya/{{ name }}/archive/{{ version }}.tar.gz

build:
  noarch: generic
  run_exports:
    - {{ pin_subpackage('phame', max_pin='x.x') }}
  number: 3

requirements:
  host:
    - perl >=5.26.0,<5.35.0
    - make
    - zlib >=1.2.11

  run:
    # Core Perl modules
    - perl >=5.26.0,<5.35.0
    - perl-bioperl >=1.7.2,<1.8.0
    - perl-statistics-distributions >=1.02
    - perl-getopt-long >=2.50
    - perl-file-path >=2.12
    - perl-parallel-forkmanager >=1.17

    # Bioinformatics toolchain
    - bwa >=0.7.17,<0.8.0
    - samtools >=0.1.18,<1.12
    - bcftools
    - mummer
    - bbmap >=38.0
    - FastTree >=2.1.10,<2.2.0
    - RAxML-ng >=1.0.0
    - bowtie2 >=2.4.1
    - muscle >=3.8.31,<4.0.0
    - paml >=4.9,<5.0
    - mafft >=7.471
    - iqtree >=2.0.0

    # Conditional dependencies
    - openmpi >=4.0.0  # [not osx]
    - hyphy >=2.5.0  # [not osx]

    # System tools
    - curl >=7.68.0
    - zlib >=1.2.11


test:
  commands:
    - perl --version
    - which perl
    - phame -h

about:
  home: https://github.com/LANL-Bioinformatics/PhaME
  license: GPLV2
  license_file: LICENSE
  summary: A tool to derive SNP matrices and phylogenetic tree from raw reads, contigs, and full genomes.

extra:
  identifiers:
    - biotools:phame
