{% set name = "ngspeciesid" %}
{% set version = "0.3.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ksahlin/NGSpeciesID/archive/refs/tags/v{{ version }}.tar.gz
  sha256: ddd378a65236d93a1f43fd42ed552b01fb13d455a4014cc57c98c666dd9e2568

build:
  number: 0
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  run_exports:
    - {{ pin_subpackage("ngspeciesid", max_pin="x.x") }}

requirements:
  host:
    - python >=3.10
    - pip
    - setuptools >=68.0
  run:
    - python >=3.10
    - parasail-python >=1.2.4
    - edlib >=1.1.2
    - spoa
    - racon
    - minimap2
    - samtools
    - medaka >=2.0.1

test:
  commands:
    - NGSpeciesID --help
    - NGSpeciesID --version

about:
  home: https://github.com/ksahlin/NGSpeciesID
  license: GPL-3.0-or-later
  license_file: LICENSE.txt
  summary: Reference-free clustering and consensus forming of long-read amplicon sequencing
  description: |
    NGSpeciesID is a tool for clustering and consensus forming of long-read
    amplicon sequencing data (has been used with both PacBio and Oxford Nanopore
    data). The repository is a modified version of isONclust, where consensus,
    primer-removal, and polishing feautures have been added.
