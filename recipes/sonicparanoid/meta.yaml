# Project ID of SonicParanoid in git lab is 11148448

{% set name = "sonicparanoid" %}
{% set version = "1.3.6" %}
{% set projectid = "11148448" %}
{% set branch = "feat-dmnd" %}

# Working example of link that can be downloaded
# https://gitlab.com/api/v4/projects/11148448/repository/archive.zip?sha=6af30d9d7e7ebf40ca151ccbe2de56bdb1ccea8a

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://gitlab.com/salvo981/sonicparanoid2/-/archive/v{{ version }}/sonicparanoid2-v{{ version }}.zip
  sha256: 4ceef966a6953d2e588a1f8585c75ee523337fa6bb8da1c98200521c82e13f82


build:
  number: 0
  skip: True  # [py<36 or py>39]
  script: "{{ PYTHON }} -m pip install . --no-deps --no-cache-dir --use-feature=in-tree-build -vvv "

requirements:
  build:
      - numpy >=1.21
  host:
    - {{ compiler("cxx") }}
    - {{ compiler('c') }}
    - python ==3.8
    - pip >=21.2.4
    - setuptools >=57.4.0
    - wheel >=0.37.0
    - Cython >=0.29.24
    - numpy >=1.21
    - pandas >=1.3.2
    - scipy >=1.7.1
    - biopython >=1.79
    - mypy >=0.910
    - psutil >=5.8.0
    - scikit-learn >=0.24.2
    - filetype >=1.0.7
  run:
    - pip >=21.2.4
    - python ==3.8
    - mmseqs2 ==13.45111
    - diamond ==2.0.11
    - blast ==2.12.0
    - mcl ==14.137

test:
  commands:
    - "python -m pip install pip==21.2.4 setuptools==57.4.0 wheel==0.37.0 Cython==0.29.24 numpy==1.21 pandas==1.3.2 scipy==1.7.1 biopython==1.79 mypy==0.910 psutil==5.8.0 scikit-learn==0.24.2 filetype==1.0.7"
    - "sonicparanoid --help"

about:
  home: "http://iwasakilab.bs.s.u-tokyo.ac.jp/sonicparanoid/"
  license: "GNU General Public License v3"
  license_family: "GPL3"
  license_file: "LICENSE.md"
  summary: "SonicParanoid: fast, easy and accurate orthology inference"

extra:
  identifiers:
    - doi:10.1093/bioinformatics/bty631
  skip-lints:
    - cython_must_be_in_host
    - compilers_must_be_in_build
