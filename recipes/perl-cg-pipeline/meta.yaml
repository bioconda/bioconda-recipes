{% set name = "perl-cg-pipeline" %}
{% set version = "0.5.1" %}
{% set sha256 = "916065a3fb3c91f1458ffdfba90ee8a0ac5fd8ed74b64a3c46b54ea15e8fb7b9" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://github.com/lskatz/CG-Pipeline/archive/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  noarch: generic
  run_exports:
    - {{ pin_subpackage('perl-cg-pipeline', max_pin="x.x") }}

requirements:
  build:
    - make
  host:
    - perl
  run:
    - perl
    - perl-bioperl
    - perl-bio-db-hts
    - perl-xml-dom
    - perl-xml-dom-xpath
    - perl-exporter
    - perl-data-dumper
    - perl-file-path
    - perl-file-spec
    - perl-file-temp
    - perl-math-round
    - perl-lwp-simple
    - perl-statistics-descriptive
    - perl-storable
    - perl-dbi
    - perl-html-tableextract
    - perl-xml-libxml

test:
  imports:
    - AKUtils
    - CGPBase
    - CGPipelineUtils
    - GTTmhmm
    - CGPipeline::Reconciliator
    - CGPipeline::SQLiteDB
    - CGPipeline::TagFactory
    - Bio::SeqIO::GTinterpro
  commands:
    - run_assembly 2>&1 | grep -C 10 'Usage'
    - run_assembly_readMetrics.pl 2>&1 | grep -C 10 'Usage'

about:
  home: https://github.com/lskatz/CG-Pipeline
  license: GNU GPL
  license_family: GPL
  summary: "Perl libraries and executables required for CG-Pipeline."
