{% set name = "merqury" %}
{% set version = "1.3.4b4846a7" %}
{% set sha256 = "ec5fd210539fa53bdebb8e365ad88f0fd03dd84f4747ba681c931d6a215704f3" %}

package:
  name: "{{ name }}"
  version: "{{ version }}"

source:
  url: https://github.com/marbl/merqury/archive/4b4846a7.tar.gz
  sha256: {{ sha256 }}

build:
  number: 2
  noarch: generic
  run_exports:
    - {{ pin_subpackage("merqury", max_pin='x.x') }}  

requirements:
  run:
    - meryl =1.4
    - openjdk  >=11.0.1
    - r-base  >=4
    - r-argparse  >=2.0.1
    - r-ggplot2  >=3.3.2
    - r-scales  >=1.1.1
    - bedtools  >=2.29.2
    - samtools  >=1.10
    - mscorefonts
    - gawk
    - sed

test:
  commands:
    - merqury.sh 2>&1 | grep Usage

about:
  home: https://github.com/marbl/{{ name }}
  license: PUBLIC DOMAIN
  license_file: LICENSE
  summary: Evaluate genome assemblies with k-mers and more.
  description: >
    Often, genome assembly projects have illumina whole genome sequencing reads available for the assembled individual.
    The k-mer spectrum of this read set can be used for independently evaluating assembly quality without the need of a high quality reference.
    Merqury provides a set of tools for this purpose.
