{% set version = "0.2.0" %}
{% set name = "dampa" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
- url: https://github.com/MultipathogenGenomics/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: 98974629e716ef12902de460c4414506ab8cf483085ed4131b0ab25846d0eca2
- url: https://files.pythonhosted.org/packages/b0/41/d235bff5c6b7c878c3d4f61984473d65695e07b9aec9a81b2f84f776f4be/pypangraph-1.0.1.tar.gz
  sha256: 845e7febf61d87dd49607ce10da188f65c923c3c667d9bcba338c2a598bffbcc
  folder: pypangraph-1.0.1

build:
  number: 0
  noarch: python
  entry_points:
    - dampa = dampa.dampa:main
  script:
    - cd pypangraph-1.0.1
    - {{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir -vvv
    - cd ..
    - {{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir -vvv
  run_exports:
    - {{ pin_subpackage(name, max_pin="x") }}

requirements:
  host:
    - python >=3.9
    - pip
    - setuptools
  run:
    - python >=3.9
    - biopython >=1.84
    - jsonschema
    - matplotlib-base >=3.10
    - pandas >=2.0
    - seaborn-base >=0.13
    - blast >=2.16
    - vsearch >=2

test:
  commands:
    - dampa --help

about:
  home: "https://github.com/MultipathogenGenomics/dampa"
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: "DAMPA designs probes for use in targetted metagenomics. It leverages pangenome graphs to increase speed and accuracy."
  dev_url: "https://github.com/MultipathogenGenomics/dampa"
