{% set name = "gemini" %}
{% set version = "0.30.2" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/arq5x/gemini/archive/v{{ version }}.tar.gz
  sha256: c7af06a4cc475a846aeeb3cd7fcfb39d6cdd0b76e3b07abab2e5e6e68a3fe431

build:
  number: 8
  script: {{ PYTHON }} -m pip install . --no-build-isolation --no-deps --no-cache-dir -vvv
  run_exports:
    - {{ pin_subpackage(name, max_pin="x.x") }}

requirements:
  build:
    - {{ compiler('c') }}
  host:
    - pip
    - python
    - setuptools
    - bcolz
    - bottle
    - bx-python
    - cython
    - cyvcf2 >0.6.5
    - geneimpacts
    - inheritance
    - ipyparallel
    - ipython-cluster-helper
    - jinja2
    - networkx
    - numexpr
    - numpy
    - openpyxl
    - pandas
    - pybedtools
    - pysam >=0.22
    - pyyaml
    - scipy
    - unidecode
    - snappy
    - python-snappy
  run:
    - python
    - bcolz
    - bottle
    - bx-python
    - cyvcf2 >0.6.5
    - geneimpacts
    - inheritance
    - ipyparallel
    - ipython-cluster-helper
    - jinja2
    - networkx
    - numexpr
    - numpy
    - sqlalchemy
    - openpyxl
    - pandas
    - pybedtools
    - pysam >=0.22
    - pyyaml
    - scipy
    - unidecode
    - grabix
    - snappy
    - python-snappy
    - wget

test:
  commands:
    - gemini -h
  imports:
    - gemini

about:
  home: "https://github.com/arq5x/gemini"
  license: MIT
  license_family: MIT
  summary: "A lightweight db framework for disease and population genetics."
  dev_url: "https://github.com/arq5x/gemini"
  doc_url: "https://gemini.readthedocs.io/en/latest"

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
  identifiers:
    - biotools:gemini
    - usegalaxy-eu:gemini_query
    - usegalaxy-eu:gemini_db_info
    - usegalaxy-eu:gemini_load
    - usegalaxy-eu:gemini_pathways
    - usegalaxy-eu:gemini_windower
    - usegalaxy-eu:gemini_annotate
    - usegalaxy-eu:gemini_amend
    - usegalaxy-eu:gemini_gene_wise
    - usegalaxy-eu:gemini_burden
    - usegalaxy-eu:gemini_stats
    - usegalaxy-eu:gemini_actionable_mutations
    - usegalaxy-eu:gemini_lof_sieve
    - usegalaxy-eu:gemini_fusions
    - usegalaxy-eu:gemini_roh
    - usegalaxy-eu:gemini_set_somatic
    - usegalaxy-eu:gemini_qc
    - usegalaxy-eu:gemini_interactions
    - usegalaxy-eu:gemini_inheritance
    - doi:10.1371/journal.pcbi.1003153
