{% set version = "1.30.0" %}
{% set name = "ccfindR" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 2cb7adf6d3e1db18b448d3385fcc79e0

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-ccfindr", max_pin="x.x") }}'

# Suggests: BiocStyle, knitr, rmarkdown
requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make
  host:
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-ape
    - r-base
    - r-gtools
    - r-irlba
    - r-matrix
    - r-rcolorbrewer
    - r-rcpp
    - r-rcppeigen
    - r-rdpack >=0.7
    - r-rmpi
    - r-rtsne
    - libblas
    - liblapack
    - zlib
    - liblzma-devel
  run:
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-ape
    - r-base
    - r-gtools
    - r-irlba
    - r-matrix
    - r-rcolorbrewer
    - r-rcpp
    - r-rcppeigen
    - r-rdpack >=0.7
    - r-rmpi
    - r-rtsne

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-2.0-or-later
  summary: Cancer Clone Finder
  description: A collection of tools for cancer genomic data clustering analyses, including those for single cell RNA-seq. Cell clustering and feature gene selection analysis employ Bayesian (and maximum likelihood) non-negative matrix factorization (NMF) algorithm. Input data set consists of RNA count matrix, gene, and cell bar code annotations.  Analysis outputs are factor matrices for multiple ranks and marginal likelihood values for each rank. The package includes utilities for downstream analyses, including meta-gene identification, visualization, and construction of rank-based trees for clusters.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

