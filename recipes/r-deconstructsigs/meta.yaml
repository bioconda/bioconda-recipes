{% set version = '1.8.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-deconstructsigs
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/deconstructSigs_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/deconstructSigs/deconstructSigs_{{ version }}.tar.gz
  sha256: 2ab8f6c0fd674bd270035ba2112f1a79d63de1155ba9698c4169c92196059d04

build:
  merge_build_host: True  # [win]

  number: 2

  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{posix}}zip               # [win]

  host:
    - r-base
    - 'bioconductor-bsgenome >=1.48.0,<1.50.0'
    - 'bioconductor-bsgenome.hsapiens.ucsc.hg19 >=1.4.0,<1.6.0'
    - bioconductor-genomeinfodb
    - r-reshape2

  run:
    - r-base
    - 'bioconductor-bsgenome >=1.48.0,<1.50.0'
    - 'bioconductor-bsgenome.hsapiens.ucsc.hg19 >=1.4.0,<1.6.0'
    - bioconductor-genomeinfodb
    - r-reshape2

test:
  commands:

    - $R -e "library('deconstructSigs')"           # [not win]
    - "\"%R%\" -e \"library('deconstructSigs')\""  # [win]

about:
  home: https://github.com/raerose01/deconstructSigs
  license: GPL (>= 2)
  summary: Takes sample information in the form of the fraction of mutations in each of 96 trinucleotide
    contexts and identifies the weighted combination of published signatures that, when
    summed, most closely reconstructs the mutational profile.
  license_family: GPL3
extra:
  recipe-maintainers:
    - MathiasHaudgaard
    - FrodePedersen
    - ArneKr
    - johanneskoester
    - bgruening
    - daler
    - jdblischak
