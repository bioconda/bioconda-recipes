{% set name = "FragPipe" %}
{% set version = "20.0" %}
{% set philosopher_version = "4.8.1" %}

# These keys were generated ONLY for the testing of this bioconda package.
# Users must generate their own key by agreeing to the terms at https://msfragger-upgrader.nesvilab.org/upgrader/ and https://msfragger.arsci.com/ionquant/.
{% set msfragger_academic_use_only_key = "f28c4be2-759b0a11-6c1ea652-1240565a" %}
{% set ionquant_academic_use_only_key = "47cb2953-b4bf7726-2c96f5fe-8f1013aa" %}

package:
  name: fragpipe
  version: {{ version }}

build:
  number: 0
  noarch: generic
  run_exports:
    - {{ pin_subpackage('fragpipe', max_pin="x.x") }}

source:
  - url: https://github.com/Nesvilab/{{ name }}/releases/download/{{ version }}/{{ name }}-{{ version }}.zip
    sha256: 0d77db85ae26c190a915823e1c68238f3a19533810734b008564b2a8d85d1bd6
    folder: fragpipe_source
  - url: https://github.com/Nesvilab/philosopher/releases/download/v{{ philosopher_version }}/philosopher_v{{ philosopher_version }}_linux_amd64.zip
    sha256: c0c85126ad9c3b1a034aca772e9617175693617a0c8809dc681522daf7f9b52f
    folder: philosopher_source

requirements:
  host:
  run:
    - openjdk >=11
    - python >=3.10
    - pandas =1.0.5
    - numpy =1.18.5
    - msfragger =4.0
    - ionquant =1.10.12

test:
  commands:
    - fragpipe --msfragger_key {{ msfragger_academic_use_only_key }} --ionquant_key {{ ionquant_academic_use_only_key }} --help  2>&1 | grep 'FragPipe'

about:
  home: https://github.com/Nesvilab/FragPipe
  license: GNU General Public License v3.0
  license_family: GPL
  summary:  Pipeline for comprehensive analysis of shotgun proteomics data
  description: |
    FragPipe is a Java Graphical User Interface (GUI) for a suite of computational tools
    enabling comprehensive analysis of mass spectrometry-based proteomics data.
    It is powered by MSFragger - an ultrafast proteomic search engine suitable
    for both conventional and "open" (wide precursor mass tolerance) peptide identification.
    FragPipe includes the Philosopher toolkit for downstream post-processing of
    MSFragger search results (PeptideProphet, iProphet, ProteinProphet), FDR filtering,
    label-based quantification, and multi-experiment summary report generation.
    Crystal-C and PTM-Shepherd are included to aid interpretation of open search results.
    Also included in FragPipe binary are TMT-Integrator for TMT/iTRAQ isobaric
    labeling-based quantification, IonQuant for label-free quantification with
    match-between-run (MBR) functionality, SpectraST and EasyPQP spectral library building modules,
    and DIA-Umpire SE module for direct analysis of data independent acquisition (DIA) data.

extra:
  recipe-maintainers:
    - reid-wagner
  identifiers:
    - biotools:fragpipe
    - doi:10.1074/mcp.TIR120.002048
