{% set name = "haddock_biobb" %}
{% set version = "2025.5" %}

package:
  name: '{{ name|lower }}'
  version: '{{ version }}'

source:
  url: "https://pypi.io/packages/source/h/haddock3/haddock3-{{ version }}.0.tar.gz"
  sha256: 14f696e20a2ff5fcc2596abd57248100acd6ea695eeb1f03040de353b7ad2971
  
build:
  number: 3
  run_exports:
    - {{ pin_subpackage(name, max_pin='x') }}
  script: |
    ln -sf $CC $BUILD_PREFIX/bin/gcc
    ln -sf $CXX $BUILD_PREFIX/bin/g++
    {{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir -vvv

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - python
    - pip
    - setuptools
  host:
    - python
    - setuptools
    - pip
  run:
    - python
    - pip
    - biopython
    - jsonpickle
    - numpy
    - pyyaml
    - scipy
    - toml
    - tox
    - pandas
    - plotly
    - kaleido-core
    - freesasa
    - pdb-tools

test:
  commands:
    - haddock3 -v

about:
  home: https://github.com/haddocking/haddock3
  license: Apache-2.0
  license_family: APACHE
  summary: HADDOCK3 is the next generation integrative modelling software in the long-lasting HADDOCK project.
  description: "HADDOCK3 is the next generation integrative modelling software in the long-lasting HADDOCK project. It represents a complete rethinking and rewriting of the HADDOCK2.X series, implementing a new way to interact with HADDOCK and offering new features to users who can now define custom workflows."

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
  recipe-maintainers: 
    - gbayarri
    - RubenChM