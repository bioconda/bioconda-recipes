{% set name = "excavator2" %}
{% set version = "1.0.1" %}

package:
  name: {{ name | lower }}
  version: {{ version }}

build:
  number: 0
  run_exports: 
    - {{ pin_subpackage('excavator2', max_pin="x") }}

source:
  url: https://github.com/ctglab/{{ name }}/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 9e963c2463d9e921547a0820d4155bc00c300206fd69ddd04fa4bb93776573c8 

requirements:
  build:
     - {{ compiler('fortran') }}
  host:
    - gfortran
    - r-base
  run:
    - perl-yaml-tiny 1.73
    - python
    - r-base 4.4.1
    - bedtools
    - samtools
    - ucsc-bigwigaverageoverbed
    - pyyaml
    - argcomplete
    - r-argparse
    - r-ggplot2 3.5.2
    - bioconductor-complexheatmap 2.22.0
    - bioconductor-genomicranges 1.58.0
    - bioconductor-iranges 2.40.0
    - r-getoptlong 1.0.5
    - zlib
    - bzip2
    - xz
    - libcurl

test:
  commands:
    - TargetPerla.pl 2>&1 | cat > /dev/null
  
about:
  home: https://github.com/ctglab/excavator2
  summary: "EXCAVATOR2 is a tool for detecting CNV from WES experiments"
  description: |
   "EXCAVATOR2 is the first read count based tool that exploits all the reads 
   produced by WES experiments to detect CNVs with a genome-wide resolution."
  license: CC-BY-NC-SA-3.0
  license_family: CC
  license_file: LICENSE.txt
  dev_url: https://github.com/ctglab/excavator2
  doc_url: "https://github.com/ctglab/excavator2/v{{ version }}/README.md"
  

