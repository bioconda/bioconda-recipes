{% set name = "get_mnv" %}
{% set version = "1.0.0" %}
{% set sha256 = "a94eda49def81ef76217b8d39095677335945105d581a0cc9b777db4f6f6b014" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://github.com/PathoGenOmics-Lab/{{ name }}/archive/refs/tags/{{ version }}.tar.gz"
  sha256: "{{ sha256 }}"

build:
  number: 0
  # Definimos el script de construcción con las rutas adecuadas para OpenSSL
  script: |
    export OPENSSL_DIR=$PREFIX
    export OPENSSL_LIB_DIR=$PREFIX/lib
    export OPENSSL_INCLUDE_DIR=$PREFIX/include
    export RUST_BACKTRACE=1
    export LANG=C.UTF-8
    export LC_ALL=C.UTF-8
    cargo install --no-track --locked --verbose --root "${PREFIX}" --path .

  run_exports:
    - {{ pin_subpackage(name, max_pin="x") }}  # Asegura que el paquete se versionee correctamente para las dependencias futuras.

requirements:
  build:
    - {{ compiler('rust') }}  # Rust y Cargo son necesarios para construir el paquete.
    - openssl                 # OpenSSL es requerido por las dependencias de Rust.
    - pkg-config              # Necesario para compilar `openssl-sys`.
    - make                    # `make` es necesario para compilar algunas dependencias nativas.
    - gcc                     # Asegura la presencia de compiladores adecuados para C/C++.
  run:
    - openssl  # Incluye OpenSSL como dependencia en tiempo de ejecución.
    - libgcc   # Incluye `libgcc` para la compatibilidad con bibliotecas de C/C++.

test:
  commands:
    - get_mnv --help  # Verifica que el binario `get_mnv` se haya instalado correctamente.

about:
  home: https://github.com/PathoGenOmics-Lab/get_mnv
  license: GPL-3.0
  license_file: LICENSE
  summary: 'Tool to identify Multi-Nucleotide Variants (MNVs) in genomic sequences.'
  description: |
    get_MNV is a tool designed to identify Multi-Nucleotide Variants (MNVs) within the same codon in genomic sequences, providing more accurate annotation for genomic data.
  doc_url: https://github.com/PathoGenOmics-Lab/get_mnv
  dev_url: https://github.com/PathoGenOmics-Lab/get_mnv

extra:
  recipe-maintainers:
    - PathoGenOmics-Lab
  categories:
    - Genomics
    - Variant Analysis

