{% set version = "1.4.0" %}
{% set name = "CTSV" %}
{% set bioc = "3.18" %}

package:
  name: 'bioconductor-{{ name|lower }}'
  version: '{{ version }}'
source:
  url:
    - 'https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz'
    - 'https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz'
    - 'https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz'
    - 'https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz'
  md5: 4a3f8c7b5398449ea01b312ed7da1f43
build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-ctsv", max_pin="x.x") }}'
  noarch: generic
# Suggests: testthat, BiocStyle
requirements:
  host:
    - 'bioconductor-biocparallel >=1.36.0,<1.37.0'
    - 'bioconductor-qvalue >=2.34.0,<2.35.0'
    - 'bioconductor-spatialexperiment >=1.12.0,<1.13.0'
    - 'bioconductor-summarizedexperiment >=1.32.0,<1.33.0'
    - r-base
    - r-knitr
    - r-pscl
  run:
    - 'bioconductor-biocparallel >=1.36.0,<1.37.0'
    - 'bioconductor-qvalue >=2.34.0,<2.35.0'
    - 'bioconductor-spatialexperiment >=1.12.0,<1.13.0'
    - 'bioconductor-summarizedexperiment >=1.32.0,<1.33.0'
    - r-base
    - r-knitr
    - r-pscl
test:
  commands:
    - '$R -e "library(''{{ name }}'')"'
about:
  home: 'https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html'
  license: GPL-3
  summary: 'Identification of cell-type-specific spatially variable genes accounting for excess zeros'
  description: 'The R package CTSV implements the CTSV approach developed by Jinge Yu and Xiangyu Luo that detects cell-type-specific spatially variable genes accounting for excess zeros. CTSV directly models sparse raw count data through a zero-inflated negative binomial regression model, incorporates cell-type proportions, and performs hypothesis testing based on R package pscl. The package outputs p-values and q-values for genes in each cell type, and CTSV is scalable to datasets with tens of thousands of genes measured on hundreds of spots. CTSV can be installed in Windows, Linux, and Mac OS.'
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

