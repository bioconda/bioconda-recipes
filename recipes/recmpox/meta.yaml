{% set name = "recmpox" %}
{% set version = "0.0.1" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/DaanJansen94/RecMpox/archive/v{{ version }}.tar.gz
  sha256: 1ff173a14df65d214d7a3b57b14f2442414680ad95629c07490cf28e7923c2c5

build:
  number: 0
  noarch: python
  entry_points:
    - recmpox=recmpox.recmpox:main
  script:
    - "{{ PYTHON }} -m pip install . --no-deps --no-build-isolation -vvv"
    - mkdir -p $PREFIX/etc/conda/activate.d
    - echo 'export PYTHONNOUSERSITE=1' > $PREFIX/etc/conda/activate.d/recmpox-env-vars.sh
  run_exports:
    - {{ pin_subpackage(name, max_pin='x.x') }}

requirements:
  host:
    - python >=3.9
    - pip
    - setuptools
  run:
    - python >=3.9
    - minimap2
    - samtools
    - squirrel

test:
  imports:
    - recmpox
  commands:
    - recmpox --help

about:
  home: https://github.com/DaanJansen94/RecMpox
  license: GPL-3.0-or-later
  license_family: GPL
  license_file: LICENSE
  summary: RecMpox flags potential recombination events in monkeypox consensus genomes.
  description: |
    RecMpox is a command-line tool that flags potential recombination events in monkeypox viruses.
    It identifies recombination tract breakpoints within your own provided consensus genomes.
    It does not confirm recombination; it flags genomes that may be recombinant for further investigation.
    RecMpox takes two references (e.g. Clade Ia vs Ib, or IIa vs IIb), aligns them with Squirrel,
    finds diagnostic SNP positions where the references differ, then classifies each consensus genome
    at those positions. Genomes where both refs contribute at least 5% are flagged as potential
    recombinants. Recombination tracts and breakpoints are inferred along the genome.
  doc_url: https://github.com/DaanJansen94/RecMpox/blob/main/README.md
  dev_url: https://github.com/DaanJansen94/RecMpox

extra:
  recipe-maintainers:
    - DaanJansen94
