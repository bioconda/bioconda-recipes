{% set version = "2025.09.01" %}
{% set sha256 = "e8ea403be3c0820be5bf5abe5f7f89f6da13898d632c1450c25aaa203e9183eb" %}

package:
  name: alloshp
  version: {{ version }}

build:
  number: 0
  script_env:
    - LC_ALL=POSIX
  run_exports:
    - {{ pin_subpackage('alloshp', max_pin="x") }}

source:
  url: https://github.com/eead-csic-compbio/AlloSHP/archive/refs/tags/{{ version }}.tar.gz 
  sha256: {{ sha256 }}

requirements:
  build:
    - {{ compiler('c') }}
    - make  
    - git
    - wget
  host:
    - sysroot_linux-64 = 2.17
  run:
    - grep
    - coreutils
    - gzip
    - bzip2  
    - perl
    - perl-db_file
    - red
    - gsalign  
    - gnuplot

test:
  commands:
    - WGA -c # checks binaries are in place
    - vcf2alignment
    - vcf2synteny  

about:
  home: https://github.com/eead-csic-compbio/AlloSHP
  summary: "From mapped reads to Single Homeologous Polymorphisms (SHPs): pipeline for phylogenetic studies of allopolyploids" 
  license: "Apache-2.0"
  license_family: APACHE 
  license_file: LICENSE
  description: "This protocol computes Whole Genome Alignments (WGA) to discover Single Homeologous Polymorphisms (SHPs) out of reads mapped to concatenated genome sequeces. It requires FASTA and VCF input files and produces multiple sequence alignments of subgenomes that make up allopolyploids."

extra:
  container:
    extended-base: True
  identifiers:
    - doi:https://doi.org/10.1101/2025.07.17.665301 
