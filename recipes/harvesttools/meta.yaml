{% set name = "harvesttools" %}
{% set version = "1.3" %}
{% set sha256 = "ffbcf0a115c74507695fd6cee4a9d5ba27a700db36b32d226521ef8dd3309264" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/marbl/harvest-tools/archive/refs/tags/v{{ version }}.tar.gz
  sha256: {{ sha256 }}
  patches:
    - 0001-master.patch

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('harvesttools',max_pin="x") }}

requirements:
  build:
    - {{ compiler('cxx') }}
    - make
    - autoconf
    - automake
    - libtool
    - pkg-config
  host:
    - protobuf <5
    - capnproto
    - zlib
  run:
    - protobuf <5
    - capnproto

test:
  commands:
    - harvesttools -h >/dev/null

about:
  home: "https://github.com/marbl/harvest-tools"
  license: "Custom; see https://raw.githubusercontent.com/marbl/harvest-tools/master/LICENSE.txt"
  summary: "HarvestTools is a part of the Harvest software suite and provides file conversion between Gingr files and various standard text formats."
  dev_url: "https://github.com/marbl/harvest-tools"

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
