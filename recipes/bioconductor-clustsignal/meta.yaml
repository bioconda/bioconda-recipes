{% set version = "1.2.0" %}
{% set name = "clustSIGNAL" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: d7af3d7c2a2fc2c68f1fe4b12b0910be

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-clustsignal", max_pin="x.x") }}'
  noarch: generic

# Suggests: knitr, BiocStyle, testthat (>= 3.0.0), aricode, ggplot2, patchwork, dplyr, scattermore
requirements:
  host:
    - bioconductor-biocneighbors >=2.4.0,<2.5.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-bluster >=1.20.0,<1.21.0
    - bioconductor-scater >=1.38.0,<1.39.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-harmony
    - r-matrix
    - r-reshape2
  run:
    - bioconductor-biocneighbors >=2.4.0,<2.5.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-bluster >=1.20.0,<1.21.0
    - bioconductor-scater >=1.38.0,<1.39.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-harmony
    - r-matrix
    - r-reshape2

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-2
  summary: 'ClustSIGNAL: a spatial clustering method'
  description: 'clustSIGNAL: clustering of Spatially Informed Gene expression with Neighbourhood Adapted Learning. A tool for adaptively smoothing and clustering gene expression data. clustSIGNAL uses entropy to measure heterogeneity of cell neighbourhoods and performs a weighted, adaptive smoothing, where homogeneous neighbourhoods are smoothed more and heterogeneous neighbourhoods are smoothed less. This not only overcomes data sparsity but also incorporates spatial context into the gene expression data. The resulting smoothed gene expression data is used for clustering and could be used for other downstream analyses.'
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

