{% set name = "obitools4" %}
{% set version = "4.4.0" %}
{% set sha256 = "3b1bb250c300cc530aa9ecd0661a2827b8db44c58d853a94bf092492532a6609"%}


package:
  name: {{ name|lower }}
  version: {{ version }}

build:
  number: 0
  run_exports:
    - {{ pin_subpackage(name, max_pin="x") }}

source:
  url: "https://github.com/metabarcoding/obitools4/archive/refs/tags/Release_{{ version }}.tar.gz"
  sha256: {{ sha256 }}

requirements:
  build:
    - {{ compiler('c')}}
    - {{ compiler('go-cgo') }}
    - libzlib
    - make
    - zlib
  run:
    - libzlib


test:
  commands:  # --help returns exit code 1
    - obiannotate --version
    - obiclean --version
    - obicleandb --version
    - obicomplement --version
    - obiconsensus --version
    - obiconvert --version
    - obicount --version
    - obicsv --version
    - obidemerge --version
    - obidistribute --version
    - obigrep --version
    - obijoin --version
    - obikmermatch --version
    - obikmersimcount --version
    - obilandmark --version
    - obimatrix --version
    - obimicrosat --version
    - obimultiplex --version
    - obipairing --version
    - obipcr --version
    # - obireffamidx --version  # works on master but not on release 4.4.0
    # - obirefidx --version  # works on master but not on release 4.4.0
    - obiscript --version
    - obisplit --version
    - obisummary --version
    - obitag --version
    - obitagpcr --version
    - obitaxonomy --version
    - obiuniq --version

  
about:
  home: https://obitools4.metabarcoding.org
  license: CECILL-2.1
  license_file: LICENCE-CECILL-2.1.txt
  #license_family: CECILL
  summary: "A software package for DNA metabarcoding"

# extra:
#   additional-platforms:
#   identifiers:
