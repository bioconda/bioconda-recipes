{% set name = "REFMAC" %}
{% set version = "5.8.0431" %}
{% set commit_hash = "be25e793829952f4f177d7dfd0c10a1eb6bbd180" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://ccp4forge.rc-harwell.ac.uk/ccp4/{{ name|lower }}/-/archive/{{ commit_hash }}.tar.gz
    sha256: 6d8b45ce4d392ec6c8c14d4f6651a7e2023299bb2f8193cb4850c64efe1501a0
    folder: refmac
  - url: https://fftw.org/fftw-2.1.5.tar.gz
    sha256: f8057fae1c7df8b99116783ef3e94a6a44518d49c72e2e630c24b689c6022630
    folder: fftw2

build:
  number: 0
  run_exports: []

requirements:
  build:
    - {{ compiler("c") }}
    - {{ compiler("cxx") }}
    - {{ compiler("fortran") }}
    - autoconf
    - automake
    - cmake
    - gnuconfig
    - libtool
    - make
    - pkg-config
  host:
    - libccp4
    - mmdb2
    - openblas
  run:
    - libopenblas

test:
  files:
    - test/*

about:
  home: https://www.ccp4.ac.uk
  dev_url: https://ccp4forge.rc-harwell.ac.uk/ccp4/refmac
  doc_url: https://ccp4forge.rc-harwell.ac.uk/ccp4/refmac/-/tree/{{ commit_hash }}/docs
  license:  LGPL-3.0
  license_family: GPL3
  license_file:
    - LICENSE
  summary: "Software for refinement of macromolecular atomic structure models"
  description: |
    REFMAC5 is a highly optimized macromolecular crystallographic refinement program distributed as part of the CCP4 suite.
    It specializes in maximizing the agreement between structural models and X-ray diffraction data through refinement of atomic coordinates, atomic displacement parameters (ADPs), scale factors, and twin fractions.
    REFMAC5 implements advanced statistical approaches including maximum-likelihood methods, making it suitable for refinement across the entire resolution spectrum encountered in macromolecular crystallography.
    The program is essential for producing high-quality electron density maps for model building and is widely used in crystallographic structure determination workflows from initial model improvement to final refinement stages.

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
  identifiers:
    - doi:10.1107/S0907444911001314
  recipe-maintainers:
    - eunos-1128
