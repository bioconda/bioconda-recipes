{% set name = "pycistopic" %}
{% set version = "1.0.2" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/aertslab/{{ name }}/archive/refs/tags/v{{ version }}.tar.gz
  sha256: f0773f4a90e680f6eeff7f16430405126d3af9a8b3ab30808d601fa32f0b0359

build:
  number: 0
  noarch: python
  script: "{{ PYTHON }} -m pip install . --no-deps -vv"
  run_exports: {{ pin_compatible("pycistopic", max_pin="x.x") }}

requirements:
  host:
    - python >={{ python_min }}
    - pip
    - poetry-core
    - setuptools
  run:
    - python >={{ python_min }}
    - numpy >=1.20.3,<2.0.0
    - pandas ==1.5
    - polars >=0.18.3
    - pyarrow >=8.0.0
    - pyranges <0.0.128
    - ray-default
    - scikit-learn
    - matplotlib-base <3.7
    - tmtoolkit
    - gensim
    - macs2
    - pybiomart
    - pyscenic
    - scrublet
    - harmonypy
    - igraph
    - leidenalg
    - seaborn
    - adjustText
    - statsmodels
    - scanpy
    - scanorama
    - bbknn
    - loomxpy
    - bs4
    - lxml
test:
  commands:
    - pycistopic --help
  imports:
    - pycisTopic

about:
  home: https://github.com/aertslab/pycistopic
  license: OTHER
  license_file: LICENSE.txt
  summary: pycisTopic is a Python module to simultaneously identify cell states and cis-regulatory topics from single cell epigenomics data.
extra:
  recipe-maintainers:
    - nilchia
