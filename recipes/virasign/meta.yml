{% set name = "virasign" %}
{% set version = "0.0.1" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/DaanJansen94/virasign/archive/v{{ version }}.tar.gz
  sha256: ac5badfcb18e6987c81a9745a0610fe73ce0b20945e3af3ecc5d399ae534f9d4

build:
  number: 0
  noarch: python
  entry_points:
    - virasign=virasign.virasign:main
  script: "{{ PYTHON }} -m pip install . --no-deps --no-build-isolation -vvv"
  run_exports:
    - {{ pin_subpackage(name, max_pin='x.x') }}

requirements:
  host:
    - python >=3.7
    - pip
    - setuptools
  run:
    - python >=3.7
    - minimap2 =2.24
    - seqtk =1.3
    - curl =7.88
    - samtools >=1.17
    - gzip
    - mmseqs2

test:
  imports:
    - virasign
  commands:
    - virasign --help

about:
  home: https://github.com/DaanJansen94/virasign
  license: GPL-3.0
  license_family: GPL
  license_file: LICENSE
  summary: Virasign is a viral taxonomic classification tool designed for nanopore sequencing data.
  description: |
    Virasign (Viral Read ASSIGNment) is a viral taxonomic classification and reference selection tool for nanopore data. 
    It maps long-read sequencing data (via minimap2) against viral databases (RVDB, RefSeq, or custom accessions) and performs 
    taxonomic classification to identify viral species. Virasign generates comprehensive interactive HTML reports with filterable 
    tables, charts and heatmaps. For each identified virus, Virasign also provides the closest reference sequence, mapped reads in 
    FASTQ format, and BAM files which can be used to easily generate a consensus genome and visualize data (e.g., IGV). Virasign 
    includes options to blind yourself from certain incidental findings (such as HIV, Hepatitis viruses, HTLV, EBV, CMV, HPV) when 
    wanted, ensuring these findings do not appear in any output files, in line with consent guidelines and ethical research practices.
  doc_url: https://github.com/DaanJansen94/virasign/blob/main/README.md
  dev_url: https://github.com/DaanJansen94/virasign

extra:
  recipe-maintainers:
    - DaanJansen94