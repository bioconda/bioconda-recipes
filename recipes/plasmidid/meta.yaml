{% set name = "plasmidid" %}
{% set version = "1.5.0" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://github.com/BU-ISCIII/plasmidID/archive/{{ PKG_VERSION }}.zip
  sha256: bccde0a935961847a9bf0a1b7fade212d60b1ad97f94a624c1451d6f7d13f3e4
build:
  number: 0    

requirements:
  host:
    - python
    - pip
    - zlib
    - capnproto
    - gsl
    - libcblas
    - wget
    
  build:
    - {{ compiler('cxx') }}
    - autoconf
    - automake
    - openjdk
    - libgcc-ng >=7.2.0
    - libstdcxx-ng
    - zlib
    - gsl
    - blas
    - capnproto

  run:
    #- {{ pin_compatible('trimmomatic') }} 
    - bedtools
    - blast
    - bowtie2
    - cd-hit
    - gawk
    #- mash >=2 #Not working
    - prokka
    - samtools
    - spades
    - trimmomatic
    - blas
    - zlib
    - capnproto
    - gsl
    - libcblas
    #- circos
    - perl
    - perl-clone
    - perl-config-general
    - perl-digest-perl-md5
    - perl-font-ttf
    - perl-gd
    - perl-list-moreutils
    - perl-math-bezier
    - perl-math-round
    - perl-math-vecstat
    - perl-params-validate
    - perl-readonly
    - perl-regexp-common
    - perl-svg
    - perl-set-intspan
    - perl-statistics-basic
    - perl-text-format
    - perl-time-hires
    - python
    - biopython
    - numpy
    - pandas
    - scikit-learn
    - scipy
    - wget


test:
  commands:
    - plasmidID --help | grep 'Pipeline options'
    - filter_fasta.sh -h | grep 'General filter'


about:
  home: https://github.com/BU-ISCIII/plasmidID
  license: GPLv3

  summary: "Pipeline for plasmid identification and reconstruction"
  description:
    PlasmidID is a mapping-based, assembly-assisted plasmid identification tool that analyzes and gives graphic solution for plasmid identification.
