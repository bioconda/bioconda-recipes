{% set version = "1.5.4" %}
package:
  name: schmutzi
  version: {{ version }}

build:
  number: 0 

source:
  url: https://github.com/grenaud/schmutzi/archive/v1.5.4.tar.gz
  md5: 75eb685c0b8c22fb52981e38330d5ea1

  patches:
    - schmutzi.patch

requirements:
  build:
    - {{ compiler('cxx') }}
    - zlib
    - perl
    - wget
    - cmake
    - r-base
    - bamtools

  run:
    - zlib
    - perl
    - r-base 
    - r-fitdistrplus
    - bamtools

test:
  commands:
    - contDeam > /dev/null
    - endoCaller > /dev/null
    - mtCont  > /dev/null
    - approxDist.R > /dev/null
    - schmutzi.pl > /dev/null
    - bam2prof > /dev/null
    - insertSize > /dev/null
    - log2freq > /dev/null
    - logs2pos > /dev/null
    - mitoConsPDF.R > /dev/null
    - mas2freq > /dev/null
    - mas2log > /dev/null
    - posteriorDeam.R  > /dev/null
    - contOut2ContEst.pl > /dev/null
    - log2fasta > /dev/null


about:
  home: https://github.com/grenaud/schmutzi
  license: unknown
  summary: Maximum a posteriori estimate of contamination for ancient samples.
