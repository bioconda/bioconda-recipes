{% set name = "pacbio_falcon" %}
{% set version = "2.1.4" %}

package:
  name: {{ name }}
  version: {{ version }}

about:
  home: 'https://github.com/PacificBiosciences/FALCON'
  license: "Standard PacBio Open Source License"
  summary: "A set of tools for fast aligning long reads for consensus and assembly"

source:
  fn: falcon_v{{ version }}.tar.gz
  # Recent tags are to the FALCON-integrate repository, which uses git submodules
  # to bundle together the dependencies. That indirectly tells us the hash of the
  # relevant commit on the main FALCON repository, e.g.
  # https://github.com/PacificBiosciences/FALCON-integrate/tree/2.1.4
  # --> FALCON @ c1e0d45
  url: https://github.com/PacificBiosciences/FALCON/archive/c1e0d45f1b847f572cd9834576154ae44bbd7382.tar.gz
  sha256: e1dfa387dc4b4304ca6e46a5dfeb3a2ad4e864914ec152d2ba8d9b8300b97ef8

build:
  number: 0
  skip: True # [py3k]

requirements:
  build:
    - python
    - setuptools
    - msgpack-python
    - pypeflow >=2.0.2,<2.1
    - networkx >=1.7,<=1.11
    - future >=0.16.0 # [not py3k]
  run:
    - python
    - perl
    - msgpack-python
    - pypeflow >=2.0.2,<2.1
    - networkx >=1.7,<=1.11
    - future >=0.16.0 # [not py3k]
    - daligner
    - damasker
    - dazz_db
    - dextractor

test:
    commands:
        - fc_run.py 2>&1 | grep fc_run
