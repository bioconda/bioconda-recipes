{% set name = "pm4ngs" %}
{% set version = "0.1.2" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/pm4ngs-{{ version }}.tar.gz
  sha256: 9001d399d3cb31f71ea093ee617f4c55c786ed8b7c88cb6e905383493c084e76

build:
  number: 0
  noarch: python
  script: {{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir -vvv
  entry_points:
    - pm4ngs-server = pm4ngs.main:start_server_main
    - pm4ngs-create = pm4ngs.main:create_project
    - pm4ngs-rnaseq = pm4ngs.main:rnaseq
    - pm4ngs-rnaseq-demo = pm4ngs.main:rnaseq_demo
    - pm4ngs-chipseq = pm4ngs.main:chipseq
    - pm4ngs-chipseq-demo = pm4ngs.main:chipseq_demo
    - pm4ngs-chipexo = pm4ngs.main:chipexo
    - pm4ngs-chipexo-demo = pm4ngs.main:chipexo_demo
    - pm4ngs-transcriptome-annotation = pm4ngs.main:transcriptome_annotation
    - pm4ngs-transcriptome-annotation-demo = pm4ngs.main:transcriptome_annotation_demo
  run_exports:
    - {{ pin_subpackage(name, max_pin="x.x") }}

requirements:
  host:
    - pip
    - python >=3.9
    - poetry-core
    - poetry-dynamic-versioning >=1.0.0,<2.0.0
  run:
    - python >=3.9
    - bioconda2biocontainer
    - biopython
    - cookiecutter
    - cwltool
    - docker-py
    - gitpython
    - goenrichment
    - jupyter
    - matplotlib-base
    - networkx
    - numpy
    - pandas
    - pdf2image
    - pyyaml
    - requests
    - scipy
    - seaborn-base
    - statsmodels
    - urllib3
    - xmltodict

test:
  commands:
    - pm4ngs-create -v
    - pm4ngs-rnaseq -h
    - pm4ngs-chipseq -h
    - pm4ngs-chipexo -h

about:
  home: "https://github.com/ncbi/pm4ngs"
  license: Public Domain
  license_family: PUBLIC-DOMAIN
  license_file: LICENSE
  summary: "PM4NGS generates a standard organizational structure for Next Generation Sequencing (ngs) data analysis."
  dev_url: "https://github.com/ncbi/pm4ngs"

extra:
  recipe-maintainers:
    - r78v10a07
