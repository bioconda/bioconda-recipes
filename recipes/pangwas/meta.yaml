{% set name = "pangwas" %}
{% set version = "0.1.0" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://github.com/phac-nml/pangwas/archive/refs/tags/v0.1.0.tar.gz
  sha256: f7484e1b7cd9dbde4e5252f830b67e474dc1a4a4f986e9539ed671240372d608

build:
  # This is not a pure python package
  noarch: generic
  number: 0
  script: {{ PYTHON }} -m pip install . -vvv --no-build-isolation --no-deps
  entry_points:
    - pangwas = pangwas:cli
  # If the software version starts with a 0 (e.g. 0.3.2) semantic versioning allows breaking changes in minor releases.
  # https://bioconda.github.io/contributor/linting.html#missing-run-exports
  run_exports:
    - {{ pin_subpackage('pangwas', max_pin='x.x') }}

requirements:
  host:
    - python
    - pip
  run:
    # Dependencies that MAYBE can be relaxed without losing reproducible/determinstic results
    - python =3.10
    - pip
    - tqdm =4.66.5
    - tar =1.34
    - networkx =3.4.2
    - dendropy =5.0.1
    - nextflow =24.10.3
    - pycairo =1.27.0
    - cairosvg =2.7.1
    - svgpathtools =1.6.0
    # Dependencies that PROBABLY need to be locked to ensure reproducible/deterministic results
    - mafft =7.526
    - iqtree =2.3.6
    - pyseer =1.3.12
    # Dependencies we know MUST be locked
    - bakta =1.9.2
    - diamond =2.1.8
    - ncbi-amrfinderplus =3.11.26
    - mmseqs2 =15.6f452    


test:
  commands:
    - pangwas --version
    - pangwas --help
  imports:
    - pangwas

about:
  home: https://github.com/phac-nml/pangwas
  license: Apache-2.0
  license_family: APACHE
  license_file: LICENSE
  summary: "A pipeline for pangenome wide association studies (panGWAS)."

extra:
  maintainers:
    - ktmeaton
  recipe-maintainers:
    - ktmeaton
