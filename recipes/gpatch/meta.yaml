{% set name = "GPatch" %}
{% set version = "0.4.0" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://pypi.io/packages/source/{{ name[0]|lower }}/{{ name|lower }}/{{ name|lower }}-{{ version }}.tar.gz"
  sha256: f9ed35addbdc57b74a7b76a66e6d52e63ea6f61176b5632df77fbc824fc4e80c

build:
  number: 0
  entry_points:
    - GPatch = GPatch.GPatch:main
  script: "{{ PYTHON }} -m pip install . -vv"
  noarch: python
  run_exports:
    - {{ pin_subpackage('gpatch', max_pin="x.x") }}

requirements:
  host:
    - python >=3.7,<3.13
    - pip
  run:
    - python >=3.7,<3.13
    - biopython >=1.84
    - pysam >=0.22.1

test:
  imports:
    - GPatch
  commands:
    - GPatch --help

about:
  home: "https://github.com/adadiehl/GPatch.git"
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: Starting with alignments of contigs to a reference genome, produce a chromosome-scale pseudoassembly by patching gaps between mapped contigs with sequences from the reference. Download the github repository for helper scripts to automate GPatch workflows, identify and correct misjoins in the contig assembly, produce dot-plots of patched pseudoassemblies to a reference assembly, and generate chrom.sizes and liftover chains for patched pseudoassemblies."
