{% set version = "1.1.1" %}
{% set sha256 = "28b8cea3ff5d05b58569583a825f1a1e8ed9469172c461c5fcbdc9f29881ff8c" %}

package:
  name: coreprofiler
  version: '{{ version }}'

source:
  url: https://gitlab.com/ifb-elixirfr/abromics/coreprofiler/-/archive/{{ version }}/coreprofiler-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  noarch: python
  number: 0
  run_exports:
    - {{ pin_subpackage('coreprofiler', max_pin="x") }}
  script: |
    python -m pip install --no-deps --ignore-installed .
    python -m pip install bio==1.5.9 bs4==0.0.2
  entry_points:
    - coreprofiler = coreprofiler.__main__:main

requirements:
  host:
    - python >=3.11
    - pip >=23.1.2
    - setuptools
    - pytest ~=7.3.2
    - pytest-cov ~=3.0.0
    - ruff ~=0.4.4
    - black ~=22.3.0
    - invoke ~=2.2.0

  run:
    - python >=3.11
    - pandas ~=2.0.3
    - biopython ~=1.81
    - blast =2.5.0
    - tqdm ~=4.65.0
    - pip
    - bio
    - bs4
    - ld_impl_linux-64
    - _libgcc_mutex
    - libstdcxx-ng
    - python_abi
    - ca-certificates
    - libgfortran5
    - libgomp
    - libgfortran-ng
    - _openmp_mutex
    - libgcc-ng
    - libopenblas
    - openssl
    - xz
    - ncurses
    - libnsl
    - libffi
    - bzip2
    - libzlib
    - libblas
    - readline
    - tk
    - libsqlite
    - libcblas
    - liblapack
    - tzdata
    - wheel
    - setuptools
    - six
    - pytz
    - python-tzdata
    - python-dateutil
    - numpy

test:
  commands:
    - coreprofiler --help
    - coreprofiler --version

about:
  home: https://gitlab.com/ifb-elixirfr/abromics
  dev_url: https://gitlab.com/ifb-elixirfr/abromics/coreprofiler
  doc_url: https://gitlab.com/ifb-elixirfr/abromics/coreprofiler/-/blob/main/docs/build/html/index.html
  license: GPL-3.0-only
  license_family: GPL
  license_file: LICENSE.txt
  summary: CoreProfiler, a robust and integrable cgMLST software

extra:
  recipe-maintainers:
    - bebatut
    - clsiguret
