{% set sha256 = "293c71d2e85312c693a6051ebbb3d7a9a80e8accb4a46e5cadaf6f2c4cd28815" %}

package:
  name: allegro
  version: 3

source:
  url: https://www.decode.com/wp-content/uploads/2018/04/allegro-2_v0f.tgz
  sha256: {{ sha256 }}
  patches:
    - patches/calcassoc.patch
    - patches/calcviterbi.patch
    - patches/genotypes.patch  # [osx]
    - patches/inherdist.patch
    - patches/options.patch
    - patches/peel.patch  # [osx]
    - patches/scoredistfull.patch

build:
  number: 10
  run_exports:
    - {{ pin_subpackage('allegro', max_pin="x") }}

requirements:
  build:
    - make
    - {{ compiler('cxx') }}
    - autoconf
    - automake
    - libtool
    - pkg-config
    - gnuconfig
  host:
    - zlib
    - wget

test:
  commands:
    - allegro 2>&1 | grep "Usage"

about:
  home: "https://www.decode.com/software/allegro"
  license: INDIVIDUAL
  summary: "A fast linkage and haplotype analysis utility making use of MTBDD to reduce complexity."
  doc_url: "https://www.decode.com/software/allegro"

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
