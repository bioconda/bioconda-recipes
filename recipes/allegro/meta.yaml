{% set sha256 = "d4211db7f68204eabcea52fdc958dd92f6239c45e965234e6f923a4dee154582" %}

package:
  name: allegro
  version: 3

source:
  url: https://github.com/BioTools-Tek/packages/raw/master/allegro2/allegro2-2017-10-11.tar.gz
  sha256: {{ sha256 }}
  patches:
    - patches/calcassoc.patch
    - patches/calcviterbi.patch
    - patches/genotypes.patch  # [osx]
    - patches/inherdist.patch
    - patches/options.patch
    - patches/peel.patch  # [osx]
    - patches/scoredistfull.patch

build:
  number: 10
  run_exports:
    - {{ pin_subpackage('allegro', max_pin="x") }}

requirements:
  build:
    - make
    - {{ compiler('cxx') }}
    - autoconf
    - automake
    - libtool
    - pkg-config
    - gnuconfig
  host:
    - zlib
    - wget

test:
  commands:
    - allegro 2>&1 | grep "Usage"

about:
  home: "https://www.decode.com/software/allegro"
  license: INDIVIDUAL
  summary: "A fast linkage and haplotype analysis utility making use of MTBDD to reduce complexity."
  doc_url: "https://www.decode.com/software/allegro"

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
