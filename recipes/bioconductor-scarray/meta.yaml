{% set version = "1.18.0" %}
{% set name = "SCArray" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 2c9d7e5ca71397e5b137d501fa6d59a3

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-scarray", max_pin="x.x") }}'

# Suggests: BiocGenerics, scater, scuttle, uwot, RUnit, knitr, markdown, rmarkdown, rhdf5, HDF5Array
requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make
  host:
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biocsingular >=1.26.0,<1.27.0
    - bioconductor-delayedarray >=0.36.0,<0.37.0
    - bioconductor-delayedmatrixstats >=1.32.0,<1.33.0
    - bioconductor-gdsfmt >=1.46.0,<1.47.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-sparsearray >=1.10.0,<1.11.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-matrix
    - libblas
    - liblapack
    - zlib
    - liblzma-devel
  run:
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biocsingular >=1.26.0,<1.27.0
    - bioconductor-delayedarray >=0.36.0,<0.37.0
    - bioconductor-delayedmatrixstats >=1.32.0,<1.33.0
    - bioconductor-gdsfmt >=1.46.0,<1.47.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-sparsearray >=1.10.0,<1.11.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-matrix

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3
  summary: Large-scale single-cell omics data manipulation with GDS files
  description: Provides large-scale single-cell omics data manipulation using Genomic Data Structure (GDS) files. It combines dense and sparse matrices stored in GDS files and the Bioconductor infrastructure framework (SingleCellExperiment and DelayedArray) to provide out-of-memory data storage and large-scale manipulation using the R programming language.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

