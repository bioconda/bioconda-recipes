{% set name = "STAR-Fusion" %}
{% set version = "1.15.0" %}
{% set sha256 = "7bd1363eb8847f3fff4519a1f8bc38d2e6c11052f02736e6caf3caeced78f46e" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/STAR-Fusion/STAR-Fusion/releases/download/STAR-Fusion-v{{ version }}/STAR-Fusion.v{{ version }}.FULL.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  noarch: generic
  run_exports:
    - {{ pin_subpackage('star-fusion', max_pin="x") }}
requirements:
  run:
    - bbmap
    - blast
    - bzip2
    - gmap
    - htslib
    - igv-reports
    - openssl
    - perl
    - perl-carp
    - perl-carp-assert
    - perl-db_file
    - perl-perlio-gzip
    - perl-json-xs
    - perl-set-intervaltree
    - perl-uri
    - python
    - samtools <1.10
    - star ==2.7.11a
    - trinity <2.9

test:
  commands:
    - STAR-Fusion --help 2>&1 | grep Optional > /dev/null
    - prep_genome_lib.pl -h 2>&1 | grep "STAR-Fusion" > /dev/null
    - blast_and_promiscuity_filter.pl -h 2>&1 | grep Optional > /dev/null

about:
  home: https://github.com/STAR-Fusion/STAR-Fusion
  license: BSD-3-Clause
  license_file: LICENSE
  license_family: BSD
  summary: "STAR-Fusion fusion variant caller. All dependencies required to run FusionInspector and FusionAnnotator are included."
  doc_url: https://github.com/STAR-Fusion/STAR-Fusion/wiki
  dev_url: https://github.com/STAR-Fusion/STAR-Fusion

extra:
  identifiers:
    - doi:10.1186/s13059-019-1842-9
    - biotools:star-fusion
    - usegalaxy-eu:star_fusion
