{% set version = "1.6.7.1" %}
package:
  name: poseidon-trident
  version: {{ version }}

# documentation of preprocessing selectors:
# https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#preprocessing-selectors
source:
  - url: https://github.com/poseidon-framework/poseidon-hs/releases/download/v{{ version }}/trident-conda-linux # [linux]
    sha256: 179b911c1f070a84e7823cde1e075bc205ca98a7006a7e9e4c9d2683a0664d8e # [linux]
  - url: https://github.com/poseidon-framework/poseidon-hs/releases/download/v{{ version }}/trident-macOS-X64 # [osx and x86_64]
    sha256: 7c2d9049577803915130e41c2746a9f635caf31758a4be7855276544fa8af9e6 # [osx and x86_64]
  - url: https://github.com/poseidon-framework/poseidon-hs/releases/download/v{{ version }}/trident-macOS-ARM64 # [osx and arm64]
    sha256: 7a4690cdb0c9a578bab4d2afa5c588977d7aa551d3b7dcff454779e854e77507 # [osx and arm64]

build:
  number: 0
  run_exports:
    - {{ pin_subpackage("poseidon-trident", max_pin=None) }}

requirements:
  build:
    # Precompiled binaries still link against libgcc
    - {{ compiler('c') }}
  host:
    - zlib
    - gmp
  run:
    - ca-certificates
    - zlib
    - gmp

test:
  commands:
     - trident --version

about:
  home: https://www.poseidon-adna.org/#/
  license: MIT
  summary: "A tool (trident) to work with modular genotype databases formatted using Poseidon."

extra:
  additional-platforms:
    - osx-arm64
  identifiers:
    - doi:10.7554/eLife.98317.1
