{% set version = "2.16.0" %}
{% set name = "CAGEr" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 680da7a0a818f28f96ce0c09838234b9

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-cager", max_pin="x.x") }}'
  noarch: generic

# Suggests: BSgenome.Dmelanogaster.UCSC.dm3, BSgenome.Drerio.UCSC.danRer7, BSgenome.Hsapiens.UCSC.hg18, BSgenome.Hsapiens.UCSC.hg19, BSgenome.Mmusculus.UCSC.mm9, DESeq2, FANTOM3and4CAGE, ggseqlogo, BiocStyle, knitr, rmarkdown
requirements:

  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biostrings >=2.78.0,<2.79.0
    - bioconductor-bsgenome >=1.78.0,<1.79.0
    - bioconductor-cagefightr >=1.30.0,<1.31.0
    - bioconductor-genomicalignments >=1.46.0,<1.47.0
    - bioconductor-genomicfeatures >=1.62.0,<1.63.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-multiassayexperiment >=1.36.0,<1.37.0
    - bioconductor-rsamtools >=2.26.0,<2.27.0
    - bioconductor-rtracklayer >=1.70.0,<1.71.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-seqinfo >=1.0.0,<1.1.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-data.table
    - r-formula.tools
    - r-ggplot2 >=4.0.0
    - r-gtools
    - r-kernsmooth
    - r-matrix
    - r-memoise
    - r-plyr
    - r-reshape2
    - r-rlang
    - r-scales
    - r-som
    - r-stringdist
    - r-stringi
    - r-vegan
    - r-vgam

  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biostrings >=2.78.0,<2.79.0
    - bioconductor-bsgenome >=1.78.0,<1.79.0
    - bioconductor-cagefightr >=1.30.0,<1.31.0
    - bioconductor-genomicalignments >=1.46.0,<1.47.0
    - bioconductor-genomicfeatures >=1.62.0,<1.63.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-multiassayexperiment >=1.36.0,<1.37.0
    - bioconductor-rsamtools >=2.26.0,<2.27.0
    - bioconductor-rtracklayer >=1.70.0,<1.71.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-seqinfo >=1.0.0,<1.1.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-data.table
    - r-formula.tools
    - r-ggplot2 >=4.0.0
    - r-gtools
    - r-kernsmooth
    - r-matrix
    - r-memoise
    - r-plyr
    - r-reshape2
    - r-rlang
    - r-scales
    - r-som
    - r-stringdist
    - r-stringi
    - r-vegan
    - r-vgam

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3.0-only
  summary: Analysis of CAGE (Cap Analysis of Gene Expression) sequencing data for precise mapping of transcription start sites and promoterome mining
  description: The _CAGEr_ package identifies transcription start sites (TSS) and their usage frequency from CAGE (Cap Analysis Gene Expression) sequencing data. It normalises raw CAGE tag count, clusters TSSs into tag clusters (TC) and aggregates them across multiple CAGE experiments to construct consensus clusters (CC) representing the promoterome.  CAGEr provides functions to profile expression levels of these clusters by cumulative expression and rarefaction analysis, and outputs the plots in ggplot2 format for further facetting and customisation.  After clustering, CAGEr performs analyses of promoter width and detects differential usage of TSSs (promoter shifting) between samples.  CAGEr also exports its data as genome browser tracks, and as R objects for downsteam expression analysis by other Bioconductor packages such as DESeq2, CAGEfightR, or seqArchR.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  identifiers:
    - biotools:cager
  parent_recipe:
    name: bioconductor-cager
    path: recipes/bioconductor-cager
    version: 1.22.3

