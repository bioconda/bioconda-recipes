{% set variant = "openblas" %}

package:
  name: finestructure
  version: '4.1.1'

source:
  url: https://people.maths.bris.ac.uk/~madjl/finestructure/fs_{{ version }}.zip
  sha256: 7af2dd51b02bf117e364f70e76d03920b0cd9ec17111b5be94dd2a5ab906b75e

build:
  number: 0
  patches:
    - perl.patch
  run_exports:
    - {{ pin_subpackage('finestructure', max_pin='x.x') }}
  skip: true # [win]

requirements:
  host:
    - perl
    - clang
    - r-xml
    - r-ape
  run:
    - perl
    - clang
    - r-xml
    - r-ape

about:
  home: https://people.maths.bris.ac.uk/~madjl/finestructure/finestructure.html
  license: OTHER
  license_file: LICENSE-FS
  summary: 'fineSTRUCTURE is a fast and powerful algorithm for identifying population structure using dense sequencing data.'

test:
  commands:
    - fs --help >> /dev/null
    - beagle2chromopainter.pl | grep "usage" 
    - chromopainter2chromopainterv2.pl | grep "usage"
    - convertrecfile.pl | grep "Usage"
    - impute2chromopainter.pl | grep "usage"
    - makeuniformrecfile.pl | grep "Usage"
    - msms2cp.pl | grep "usage"
    - phasescreen.pl | grep "usage"
    - phasesubsample.pl | grep "usage"
    - plink2chromopainter.pl | grep "Usage"
    - Rscript FinestructureLibrary.R


extra:
  identifiers:
    - biotools:fineSTRUCTURE
    - doi:10.1371/journal.pgen.1002453
