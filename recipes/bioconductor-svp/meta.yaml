{% set version = "1.2.1" %}
{% set name = "SVP" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 9897851c3c0223e2506cecec6612ccbb

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-svp", max_pin="x.x") }}'

# Suggests: rmarkdown, prettydoc, broman, RSpectra, BiasedUrn, knitr, ks, igraph, testthat (>= 3.0.0), scuttle, magrittr, DropletUtils, tibble, tidyr, harmony, aplot, scales, ggsc, scatterpie, scran, scater, STexampleData, ape
# SystemRequirements: GNU make
requirements:

  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make

  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocneighbors >=2.4.0,<2.5.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-delayedmatrixstats >=1.32.0,<1.33.0
    - bioconductor-ggtree >=4.0.0,<4.1.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-cli
    - r-deldir
    - r-dplyr
    - r-dqrng
    - r-fastmatch
    - r-ggfun
    - r-ggplot2
    - r-ggstar
    - r-matrix
    - r-pracma
    - r-rcpp
    - r-rcpparmadillo >=14.0
    - r-rcppeigen
    - r-rcppparallel
    - r-rlang
    - r-withr
    - libblas
    - liblapack
    - zlib
    - liblzma-devel

  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocneighbors >=2.4.0,<2.5.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-delayedmatrixstats >=1.32.0,<1.33.0
    - bioconductor-ggtree >=4.0.0,<4.1.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-cli
    - r-deldir
    - r-dplyr
    - r-dqrng
    - r-fastmatch
    - r-ggfun
    - r-ggplot2
    - r-ggstar
    - r-matrix
    - r-pracma
    - r-rcpp
    - r-rcpparmadillo >=14.0
    - r-rcppeigen
    - r-rcppparallel
    - r-rlang
    - r-withr

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3.0-only
  summary: Predicting cell states and their variability in single-cell or spatial omics data
  description: SVP uses the distance between cells and cells, features and features, cells and features in the space of MCA to build nearest neighbor graph, then uses random walk with restart algorithm to calculate the activity score of gene sets (such as cell marker genes, kegg pathway, go ontology, gene modules, transcription factor or miRNA target sets, reactome pathway, ...), which is then further weighted using the hypergeometric test results from the original expression matrix. To detect the spatially or single cell variable gene sets or (other features) and the spatial colocalization between the features accurately, SVP provides some global and local spatial autocorrelation method to identify the spatial variable features. SVP is developed based on SingleCellExperiment class, which can be interoperable with the existing computing ecosystem.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

