{% set name = 'sortmerna' %}
{% set version = '4.3.7-beta.1' %}

package:
  name: {{ name }}
  version: {{ version }}

# TODO:
#   - for now using pre-built binaries due complexities with C++17 and the dependencies.

source:
  url: https://github.com/sortmerna/sortmerna/archive/refs/tags/v{{ version }}.tar.gz
  sha256: b225b97e85eebc7414f1cc7883d9a6986ad142fe4a4e19861f8920b7defa742f

build:
  number: 0
  run_exports:
    - {{ pin_subpackage(name, max_pin='x') }}

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
  host:
    - pyyaml
    - jinja2
    - requests
  run:
    - pyyaml
    - jinja2
    - requests

test:
  commands:
  - sortmerna --version
  - sortmerna -h

about:
  home: http://bioinfo.lifl.fr/RNA/sortmerna
  license: LGPL
  summary: SortMeRNA is a biological sequence analysis tool for filtering, mapping and OTU-picking NGS reads.

extra:
  additional-platforms:
    - linux-aarch64
  identifiers:
    - biotools:sortmerna
    - doi:10.1093/bioinformatics/bts611
    - usegalaxy-eu:bg_sortmerna
