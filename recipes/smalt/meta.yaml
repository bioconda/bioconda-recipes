{% set name = "smalt" %}
{% set version = "0.7.6" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://sourceforge.net/projects/smalt/files/{{ name }}-{{ version }}.tar.gz
  sha256: 89ccdfe471edba3577b43de9ebfdaedb5cd6e26b02bf4000c554253433796b31

build:
  number: 2
  skip: True  # [osx]
  run_exports:
    - {{ pin_subpackage(name, max_pin="x.x") }}

requirements:
  build:
    - make
    - {{ compiler('c') }}
    - autoconf
    - automake
    - libtool
    - pkg-config
  host:
    - bambamc
    - samtools          # used by 'make check'
    - wget
    - zlib
  run:
    - bambamc

test:
  commands:
    - smalt version 2>&1 | grep "SMALT - Sequence Mapping and Alignment Tool" > /dev/null

about:
  home: "https://www.sanger.ac.uk/tool/smalt"
  license: "GPL-3.0-or-later"
  license_family: GPL3
  summary: "SMALT aligns DNA sequencing reads with a reference genome."
  doc_url: "https://www.sanger.ac.uk/tool/smalt"

extra:
  additional-platforms:
    - linux-aarch64
    # ld: in libsgm.a(libseq.a), archive member 'libseq.a' with length 62872 is not mach-o or llvm bitcode file 'libsgm.a' for architecture arm64
    #- osx-arm64
  identifiers:
    - biotools:smalt
