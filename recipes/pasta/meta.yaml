{% set version = "1.9.0" %}
{% set sha256 = "6f816aebe00b7b6bb78a250ad45f5aa2aa8eff0f9719736f05b0597dd3b1f9a1" %}

package:
  name: pasta
  version: '{{version}}'

source:
  - url: https://github.com/smirarab/pasta/archive/v{{version}}.tar.gz
    sha256: '{{sha256}}'

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('pasta', max_pin="x") }}

requirements:
  host:
    - python
    - setuptools
    - dendropy <=4.5.1
    - wget
    - openjdk
    - pcre
    - pymongo >=3.3.0
    - clustalw
    - fasttree
    - raxml
    - muscle <4  # later versions expects other cmd argument names
    - mafft
    - hmmer ==3.1b2
    - prank

  run:
    - python
    - dendropy <=4.5.1  # later version do not expose _convert_node_to_root_polytomy
    - openjdk
    - pcre
    - pymongo >=3.3.0
    - clustalw
    - fasttree
    - raxml
    - muscle <4  # later versions expects other cmd argument names
    - mafft
    - hmmer ==3.1b2
    - prank

test:
  imports:
    - pasta

  commands:
    - clustalw2 -help | grep OPTIONS
    - hmmalign -h | grep HMMER
    - hmmbuild -h | grep HMMER
    - muscle -version | grep -i MUSCLE
    - prank -help | grep prank
    - raxml -h | grep -i raxml
    - raxmlp -h | grep -i raxml
    - run_pasta.py -i $PREFIX/share/pasta/data/small.fasta
    - run_pasta.py -i $PREFIX/share/pasta/data/small.fasta --tree-estimator raxml

about:
  home: https://github.com/smirarab/pasta
  license: GPLv3
  license_family: GPL3
  license_file: LICENSE
  summary: 'An implementation of the PASTA (Practical Alignment using Sate and TrAnsitivity) algorithm'
