{% set version = "1.2.0" %}
{% set name = "CARDspa" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 2fd7d702893d20899d23cd6c5ecfbf06

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-cardspa", max_pin="x.x") }}'

# Suggests: knitr, rmarkdown, testthat, BiocStyle
requirements:

  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make

  host:
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-concaveman
    - r-dplyr
    - r-fields
    - r-ggcorrplot
    - r-ggplot2
    - r-gtools
    - r-matrix
    - r-mcmcpack
    - r-nmf
    - r-nnls
    - r-rann
    - r-rcolorbrewer
    - r-rcpp >=1.0.7
    - r-rcpparmadillo
    - r-rcppml
    - r-reshape2
    - r-scatterpie
    - r-sf
    - r-sp
    - r-spatstat.random
    - r-wrmisc
    - libblas
    - liblapack
    - zlib
    - liblzma-devel

  run:
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-concaveman
    - r-dplyr
    - r-fields
    - r-ggcorrplot
    - r-ggplot2
    - r-gtools
    - r-matrix
    - r-mcmcpack
    - r-nmf
    - r-nnls
    - r-rann
    - r-rcolorbrewer
    - r-rcpp >=1.0.7
    - r-rcpparmadillo
    - r-rcppml
    - r-reshape2
    - r-scatterpie
    - r-sf
    - r-sp
    - r-spatstat.random
    - r-wrmisc

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3 + file LICENSE
  summary: Spatially Informed Cell Type Deconvolution for Spatial Transcriptomics
  description: CARD is a reference-based deconvolution method that estimates cell type composition in spatial transcriptomics based on cell type specific expression information obtained from a reference scRNA-seq data. A key feature of CARD is its ability to accommodate spatial correlation in the cell type composition across tissue locations, enabling accurate and spatially informed cell type deconvolution as well as refined spatial map construction. CARD relies on an efficient optimization algorithm for constrained maximum likelihood estimation and is scalable to spatial transcriptomics with tens of thousands of spatial locations and tens of thousands of genes.
  license_file: LICENSE

