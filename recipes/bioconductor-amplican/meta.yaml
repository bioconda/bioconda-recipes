{% set version = "1.32.1" %}
{% set name = "amplican" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name }}/bioconductor-{{ name }}_{{ version }}_src_all.tar.gz
  md5: 61890b913e9c53323987ff06336e5c3f

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-amplican", max_pin="x.x") }}'

# Suggests: testthat, BiocStyle, GenomicAlignments
requirements:

  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make

  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biostrings >=2.78.0,<2.79.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-pwalign >=1.6.0,<1.7.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-seqinfo >=1.0.0,<1.1.0
    - bioconductor-shortread >=1.68.0,<1.69.0
    - r-base
    - r-cluster >=2.1.4
    - r-data.table >=1.10.4-3
    - r-dplyr >=0.7.2
    - r-ggplot2 >=3.3.4
    - r-ggthemes >=3.4.0
    - r-gridextra >=2.2.1
    - r-gtable >=0.2.0
    - r-knitr >=1.16
    - r-matrix >=1.2-10
    - r-matrixstats >=0.52.2
    - r-rcpp
    - r-rmarkdown >=1.6
    - r-stringr >=1.2.0
    - libblas
    - liblapack
    - zlib
    - liblzma-devel

  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-biostrings >=2.78.0,<2.79.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-pwalign >=1.6.0,<1.7.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-seqinfo >=1.0.0,<1.1.0
    - bioconductor-shortread >=1.68.0,<1.69.0
    - r-base
    - r-cluster >=2.1.4
    - r-data.table >=1.10.4-3
    - r-dplyr >=0.7.2
    - r-ggplot2 >=3.3.4
    - r-ggthemes >=3.4.0
    - r-gridextra >=2.2.1
    - r-gtable >=0.2.0
    - r-knitr >=1.16
    - r-matrix >=1.2-10
    - r-matrixstats >=0.52.2
    - r-rcpp
    - r-rmarkdown >=1.6
    - r-stringr >=1.2.0

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3
  summary: Automated analysis of CRISPR experiments
  description: '`amplican` performs alignment of the amplicon reads, normalizes gathered data, calculates multiple statistics (e.g. cut rates, frameshifts) and presents results in form of aggregated reports. Data and statistics can be broken down by experiments, barcodes, user defined groups, guides and amplicons allowing for quick identification of potential problems.'
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  additional-platforms:
    - linux-aarch64
  identifiers:
    - biotools:amplican

