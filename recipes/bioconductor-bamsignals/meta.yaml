{% set version = "1.42.0" %}
{% set name = "bamsignals" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name }}/bioconductor-{{ name }}_{{ version }}_src_all.tar.gz
  md5: 4db62ea81f938998d82b3b9b537b781f

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-bamsignals", max_pin="x.x") }}'

# Suggests: testthat (>= 0.9), Rsamtools, BiocStyle, knitr, rmarkdown
# SystemRequirements: GNU make
requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make
  host:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-rhtslib >=3.6.0,<3.7.0
    - r-base
    - r-rcpp >=0.10.6
    - libblas
    - liblapack
    - zlib
    - liblzma-devel
  run:
    - bioconductor-biocgenerics >=0.56.0,<0.57.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-iranges >=2.44.0,<2.45.0
    - bioconductor-rhtslib >=3.6.0,<3.7.0
    - r-base
    - r-rcpp >=0.10.6

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-2
  summary: Extract read count signals from bam files
  description: This package allows to efficiently obtain count vectors from indexed bam files. It counts the number of reads in given genomic ranges and it computes reads profiles and coverage profiles. It also handles paired-end data.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  additional-platforms:
    - linux-aarch64
  identifiers:
    - biotools:bamsignals
    - doi:10.1038/nmeth.3252
  parent_recipe:
    name: bioconductor-bamsignals
    path: recipes/bioconductor-bamsignals
    version: 1.12.1

