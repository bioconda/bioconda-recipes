{% set name = "robust-bias-aware" %}
{% set version = "0.0.2" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://github.com/lspindler2509/robust_bias_aware_pip_package/archive/refs/tags/v{{ version }}-alpha.tar.gz"
  sha256: fb2b8fa6c53ae4bc2e9174a5ea31be327da07c0564e383d0ec327665047aeec2

build:
  number: 2
  script: 
    - "{{ PYTHON }} -m pip install . -vvv --no-deps --no-build-isolation"
    - mkdir -p $PREFIX/site-packages
    - cp -r $SRC_DIR/robust_bias_aware/* $PREFIX/site-packages
    - cd robust_bias_aware
    - echo "updating networks and study bias scores"
    - python3 data/networks/update_inbuilt_ppi_networks.py
    - python3 data/study_bias_scores/update_inbuilt_study_bias_scores.py
    - echo "updated networks and study bias scores"
  noarch: python
  run_exports:
    - {{ pin_subpackage('robust-bias-aware', max_pin="x.x") }}

requirements:
  build:
    - python
    - setuptools
    - ndex2
    - mygene
    - pandas >=1.3.5
    - networkx >=2.6.3
  host:
    - pip >=3.7
    - python

  run:
    - numpy >=1.26.4
    - matplotlib-base >=3.2.2
    - pandas >=1.3.5
    - networkx >=2.6.3
    - pcst-fast
    - python >=3.7


test:
  commands:
    - robust-bias-aware --help


about:
  home: https://github.com/bionetslab/robust_bias_aware_pip_package
  license: GPL-3.0-or-later
  license_family: GPL3
  license_file: LICENSE
  summary: "Robust bias aware."
