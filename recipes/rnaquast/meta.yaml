{% set name = "rnaQUAST" %}
{% set version = "2.2.0" %}
{% set sha256 = "d5072b30fc83ea9213ef6678bc7131c38982f8a7160e94ae335240bc38dd3b95" %}

package:
  name: {{ name | lower }}
  version: {{ version }}

source:
  url: http://cab.spbu.ru/files/{{ name | lower }}/release{{ version }}/{{ name }}-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 2
  skip: True  # [osx]

requirements:
  run:
    - python
    - blast
    - blat
    - busco >=4
    - emboss
    - gmap <2021.02.22
    - gffutils
    - joblib
    - matplotlib-base
    - ucsc-pslsort
    - star
    - samtools

test:
  commands:
    - rnaQUAST.py --test
    - makeblastdb -help
    # test fa_coords from gmap
    - ": | fa_coords | grep 'Error: No contigs were read in.'"

about:
  summary: rnaQUAST is a tool for evaluating RNA-Seq assemblies using reference genome and gene database. In addition, rnaQUAST is also capable of estimating gene database coverage by raw reads and de novo quality assessment using third-party software.
  home: http://cab.spbu.ru/software/rnaquast/
  license: GPLv2

extra:
  skip-lints:
    - should_be_noarch_generic
