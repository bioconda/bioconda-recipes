{% set name = "PhyClone" %}
{% set version = "0.8.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/Roth-Lab/PhyClone/archive/{{ version }}.tar.gz
  sha256: 8b779dd7a7a800f59ea6850c41a343b80d8e4f56733cd255d926fe3d8c3eb36d

build:
  entry_points:
    - phyclone = phyclone.cli:main
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation --no-cache-dir
  number: 0
  run_exports:
    - {{ pin_subpackage('phyclone', max_pin="x.x") }}

requirements:
  host:
    - python >=3.12
    - setuptools >=77.0.3
    - setuptools-rust
    - pip
  run:
    - python >=3.12
    - numba >=0.61.2
    - numpy >=2.0.0
    - scipy
    - click >=8.3
    - python-xxhash >=3.3.0
    - networkx >=3.6.1
    - rustworkx >=0.15.1
    - pandas >=2.2.2
    - h5py >=3.15

test:
  imports:
    - phyclone
  commands:
    - phyclone --help
    - phyclone run --help
    - phyclone map --help
    - phyclone consensus --help
    - phyclone topology-report --help

about:
  summary: Accurate Bayesian reconstruction of cancer phylogenies from bulk sequencing.
  license: GPL-3.0-or-later
  license_file: LICENSE.md
  home: https://github.com/Roth-Lab/PhyClone

extra:
  recipe-maintainers:
    - elhurtado
  identifiers:
    - doi:10.1093/bioinformatics/btaf344
