{% set name = "singlem" %}
{% set version = "0.19.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 78ee347e8be31a39ce89af0f0df49aaacf503a0c8d10ba56cf7a6407f14297b1

build:
  number: 0
  noarch: python
  script: "{{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir -vvv"
  run_exports:
    - {{ pin_subpackage('singlem', max_pin="x.x") }}

# Requirements can be copied from the environment.yml file at https://github.com/wwood/singlem/blob/main/admin/environment.yml
requirements:
  host:
    - pip
    - python >=3.12.3
    - setuptools
  run:
    - biopython =1.85
    - bird_tool_utils_python =0.4.1
    - cd-hit =4.8.1
    - diamond =2.1.10
    - expressbetadiversity =1.0.10
    - extern =0.4.1
    - fastalite =0.4.1
    - fasttree =2.1.11
    - galah =0.4.2
    - graftm =0.15.1
    - gtdbtk =2.4.1
    - hmmer =3.2.1
    - jinja2 =3.1.6
    - krona =2.8.1
    - mafft =7.526
    - mfqe =0.5.0
    - ncbi-ngs-sdk =3.0.1
    - orfm =1.3
    - pandas =2.2.3
    - pip =25.0.1
    - polars =1.27.1
    - pplacer =1.1.alpha19
    - prodigal =2.6.3
    - pyarrow =16.1.0
    - pyranges =0.1.4
    - python =3.12.3
    - seqmagick =0.8.6
    - smafa =0.8.0
    - sqlalchemy =2.0.40
    - sqlite =3.46.0
    - sqlparse =0.5.3
    - squarify =0.4.3
    - sra-tools =2.9.6
    - tqdm =4.67.1
    - zenodo_backpack =0.3.1

test:
  imports:
    - singlem
  commands:
    - singlem -h

about:
  home: "https://github.com/wwood/singlem"
  license: "GPL-3.0-or-later"
  license_family: "GPL3"
  license_file: "LICENCE.txt"
  summary: 'SingleM is a tool for profiling shotgun metagenomes. It has a particular strength in detecting microbial lineages which are not in reference databases. The method it uses also makes it suitable for some related tasks, such as assessing eukaryotic contamination, finding bias in genome recovery, and lineage-targeted MAG recovery.'
  dev_url: "https://github.com/wwood/singlem"
  doc_url: "https://wwood.github.io/singlem/"
