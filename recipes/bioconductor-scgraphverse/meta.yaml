{% set version = "1.0.0" %}
{% set name = "scGraphVerse" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 73f44ba6d1999491da440daa6f0fb82c

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-scgraphverse", max_pin="x.x") }}'

# Suggests: AnnotationDbi, BiocStyle, clusterProfiler, DOSE, enrichplot, fmsb, ggplot2, ggraph, gridExtra, INetTool, org.Hs.eg.db, org.Mm.eg.db, patchwork, pROC, RColorBrewer, ReactomePA, rentrez, robin, scales, Seurat, STRINGdb, testthat (>= 3.0.0), knitr, rmarkdown, tidyverse, magick, celldex, SingleR, TENxPBMCData, scater, GenomeInfoDb, GenomicRanges,
# SystemRequirements: Python (>= 3.6) and arboreto Python package for GRNBoost2 method. Use init_py(install_missing = TRUE) for automated installation.
requirements:

  build:
    - {{ compiler('c') }}
    - make

  host:
    - bioconductor-biocbaseutils >=1.12.0,<1.13.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-genie3 >=1.32.0,<1.33.0
    - bioconductor-graph >=1.88.0,<1.89.0
    - bioconductor-multiassayexperiment >=1.36.0,<1.37.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-distributions3
    - r-doparallel
    - r-dorng
    - r-dplyr
    - r-glmnet
    - r-httr
    - r-igraph
    - r-jsonlite
    - r-mass
    - r-matrix
    - r-mpath
    - r-reticulate
    - r-tidyr
    - libblas
    - liblapack
    - zlib
    - liblzma-devel

  run:
    - bioconductor-biocbaseutils >=1.12.0,<1.13.0
    - bioconductor-biocparallel >=1.44.0,<1.45.0
    - bioconductor-genie3 >=1.32.0,<1.33.0
    - bioconductor-graph >=1.88.0,<1.89.0
    - bioconductor-multiassayexperiment >=1.36.0,<1.37.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-distributions3
    - r-doparallel
    - r-dorng
    - r-dplyr
    - r-glmnet
    - r-httr
    - r-igraph
    - r-jsonlite
    - r-mass
    - r-matrix
    - r-mpath
    - r-reticulate
    - r-tidyr

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL-3 + file LICENSE
  summary: 'scGraphVerse: A Gene Network Analysis Package'
  description: A package for inferring, comparing, and visualizing gene networks from single-cell RNA sequencing data. It integrates multiple methods (GENIE3, GRNBoost2, ZILGM, PCzinb, and JRF) for robust network inference, supports consensus building across methods or datasets, and provides tools for evaluating regulatory structure and community similarity. GRNBoost2 requires Python package 'arboreto' which can be installed using init_py(install_missing = TRUE). This package includes adapted functions from ZILGM (Park et al., 2021), JRF (Petralia et al., 2015), and learn2count (Nguyen et al. 2023) packages with proper attribution under GPL-2 license.
  license_file: LICENSE

