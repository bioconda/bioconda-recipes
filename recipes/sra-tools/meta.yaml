{% set SRA_TOOLS_VERSION = "2.8.0" %}
{% set NCBI_VDB_VERSION = SRA_TOOLS_VERSION %}
{% set NGS_SDK_VERSION = "1.3.0" %}

{% set SRA_TOOLS_SHA256 = "df6ea1041d3fd3aab357b4c01c43d0054358a0e7f985a59511cae9c9e220b70a" %}
{% set NCBI_VDB_SHA256 = "efa0b9b4987db7ef80e2c91ba35f5a0bab202e3a4824e8f34c51de303ca4eb17" %}
{% set NGS_SDK_SHA256 = "803c650a6de5bb38231d9ced7587f3ab788b415cac04b0ef4152546b18713ef2" %}

package:
  name: sra-tools
  version: {{ SRA_TOOLS_VERSION }}

build:
  number: 0

source:
  fn: sra-tools-{{ SRA_TOOLS_VERSION }}.tar.gz
  url: https://github.com/ncbi/sra-tools/archive/{{ SRA_TOOLS_VERSION }}.tar.gz
  sha256: {{ SRA_TOOLS_SHA256 }}

extra:
  sources:
    ncbi-vdb:
      fn: ncbi-vdb-{{ NCBI_VDB_VERSION }}.tar.gz
      url: https://github.com/ncbi/ncbi-vdb/archive/{{ NCBI_VDB_VERSION }}.tar.gz
      sha256: {{ NCBI_VDB_SHA256 }}
    ngs-sdk:
      fn: ngs-sdk-{{ NGS_SDK_VERSION }}.tar.gz
      url: https://github.com/ncbi/ngs/archive/{{ NGS_SDK_VERSION }}.tar.gz
      sha256: {{ NGS_SDK_SHA256 }}

  notes: "This package includes ncbi-vdb and ngs-sdk. After installation, you should run the configuration tool: ./vdb-config -i. This tool will setup your download/cache area for downloaded files and references."

requirements:
  build:
    - gcc # [not osx]
    - llvm # [osx]
  run:
    #

about:
  home: https://github.com/ncbi/sra-tools
  license: Public Domain
  summary: The SRA Toolkit and SDK from NCBI is a collection of tools and
           libraries for using data in the INSDC Sequence Read Archives.
test:
  commands:
    # "Frequently Used Tools"
    - fastq-dump --help > /dev/null
    - prefetch --help > /dev/null
    - sam-dump --help > /dev/null
    - sra-pileup --help > /dev/null
    - vdb-config --help > /dev/null
    - vdb-decrypt --help > /dev/null
