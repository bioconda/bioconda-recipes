diff --git a/c++/src/build-system/configure b/c++/src/build-system/configure
index 704ecb6..f9c54c6 100755
--- a/c++/src/build-system/configure
+++ b/c++/src/build-system/configure
@@ -9624,10 +9624,12 @@ case "$host_os:$compiler:$compiler_version" in
       CONF_loadable_ext=".dylib"
    fi
    if test "$compiler" = AppleClang \
-      ||  ("$compiler" = GCC  &&  $CXX -v 2>&1 | grep -q Apple) ; then
+      ||  test "$compiler" = LLVMClang \
+      ||  (test "$compiler" = GCC  &&  $CXX -v 2>&1 | grep -i -q Apple) ; then
       CFLAGS="-fpascal-strings $CFLAGS"
       CXXFLAGS="-fpascal-strings $CXXFLAGS"
-      if test "$compiler" = AppleClang; then
+      if test "$compiler" = AppleClang \
+        || test "$compiler" = LLVMClang; then
          try_old_sdks=no
       else
          try_old_sdks=$with_ncbi_public
@@ -10019,7 +10021,7 @@ if ac_fn_c_try_compile "$LINENO"; then :
 else
   ac_cv_header_stdc=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -rf core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
@@ -10034,7 +10036,7 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
 else
   ac_cv_header_stdc=no
 fi
-rm -f conftest*
+rm -rf conftest*
 
 fi
 
@@ -10051,7 +10053,7 @@ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
 else
   ac_cv_header_stdc=no
 fi
-rm -f conftest*
+rm -rf conftest*
 
 fi
 
@@ -10092,7 +10094,7 @@ if ac_fn_c_try_run "$LINENO"; then :
 else
   ac_cv_header_stdc=no
 fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
+rm -rf core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
 
@@ -27743,7 +27745,7 @@ $as_echo "$as_me: WARNING: $message" >&2;}  ;;
          case "$host_os:$host_cpu:$bit64_sfx" in
             darwin*:*86*:64 ) vdb_libpath=mac/$vdb_mode/x86_64/lib   ;;
             darwin*:*86*:* )  vdb_libpath=mac/$vdb_mode/fat86/lib    ;;
-            darwin*:arm*   )  vdb_libpath=mac/$vdb_mode/aarch64/lib  ;;
+            darwin*:a*   )  vdb_libpath=mac/$vdb_mode/arm64/lib  ;;
             linux*:*86*:64 )  vdb_libpath=linux/$vdb_mode/x86_64/lib ;;
             linux*:aarch64* ) vdb_libpath=linux/$vdb_mode/aarch64/lib ;;
             * )
