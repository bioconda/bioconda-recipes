{% set version = "3.20.0" %}
{% set name = "RMassBank" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: e9a5a2fbc9bd1f161fd52151cacda73b

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-rmassbank", max_pin="x.x") }}'

# Suggests: BiocStyle, CAMERA, gplots, knitr, magick, rmarkdown, RMassBankData (>= 1.33.1), RUnit, xcms (>= 1.37.1)
# SystemRequirements: OpenBabel
requirements:

  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}

  host:
    - bioconductor-biobase >=2.70.0,<2.71.0
    - bioconductor-chemminer >=3.62.0,<3.63.0
    - bioconductor-msnbase >=2.36.0,<2.37.0
    - bioconductor-mzr >=2.44.0,<2.45.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - r-assertthat
    - r-base
    - r-data.table
    - r-digest
    - r-dplyr
    - r-envipat
    - r-glue
    - r-httr
    - r-httr2
    - r-logger
    - r-purrr
    - r-r.utils
    - r-rcdk
    - r-rcpp
    - r-readjdx
    - r-readr
    - r-rjson
    - r-tibble
    - r-tidyselect
    - r-webchem
    - r-xml
    - r-yaml
    - libblas
    - liblapack
    - zlib
    - liblzma-devel
    - openbabel

  run:
    - bioconductor-biobase >=2.70.0,<2.71.0
    - bioconductor-chemminer >=3.62.0,<3.63.0
    - bioconductor-msnbase >=2.36.0,<2.37.0
    - bioconductor-mzr >=2.44.0,<2.45.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - r-assertthat
    - r-base
    - r-data.table
    - r-digest
    - r-dplyr
    - r-envipat
    - r-glue
    - r-httr
    - r-httr2
    - r-logger
    - r-purrr
    - r-r.utils
    - r-rcdk
    - r-rcpp
    - r-readjdx
    - r-readr
    - r-rjson
    - r-tibble
    - r-tidyselect
    - r-webchem
    - r-xml
    - r-yaml
    - openbabel

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: Artistic-2.0
  summary: Workflow to process tandem MS files and build MassBank records
  description: Workflow to process tandem MS files and build MassBank records.  Functions include automated extraction of tandem MS spectra, formula assignment to tandem MS fragments, recalibration of tandem MS spectra with assigned fragments, spectrum cleanup, automated retrieval of compound information from Internet databases, and export to MassBank records.

