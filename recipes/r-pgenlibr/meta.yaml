{% set version = '0.3.7' %}

package:
  name: r-pgenlibr
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/pgenlibr_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/pgenlibr/pgenlibr_{{ version }}.tar.gz
  sha256: 03928d827ef296b49819892db75eb621c009a40de88ff5ea519cd3982ca96bf1

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('r-pgenlibr', max_pin="x.x") }}
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('cxx') }}            # [not win]
    - autoconf
    - automake          # [not win]
    - pkg-config
    - make
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
    - r-rcpp >=1.0.1
  run:
    - r-base
    - r-rcpp >=1.0.1

test:
  commands:
    - $R -e "library('pgenlibr')"           # [not win]

about:
  home: https://CRAN.R-project.org/package=pgenlibr
  license: LGPL-3
  summary: >
    A thin wrapper over PLINK 2's core libraries which provides an R interface
    for reading .pgen files. A minimal .pvar loader is also included.
    Chang et al. (2015) \doi{10.1186/s13742-015-0047-8}.
  license_family: LGPL
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/LGPL-3'

extra:
  recipe-maintainers:
    - aryarm
