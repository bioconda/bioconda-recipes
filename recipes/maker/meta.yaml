{% set blast_version = "2.9.0" %}

package:
  name: maker
  version: 2.31.10

source:
  url: http://yandell.topaz.genetics.utah.edu/maker_downloads/static/maker-2.31.10.tgz
  md5: 30e3ff1b4bad0218ebf20d049638e864
  patches:
    - "repeatmasker_check.patch"
    - "mpi_init.patch"

build:
  noarch: generic
  number: 16

requirements:
  host:
    - augustus ==3.2.3
    - blast {{ blast_version }}
    - exonerate ==2.4.0
    - infernal ==1.1.2
    - mir-prefer ==0.24
    - repeatmasker ==4.0.9_p2
    - snap ==2013_11_29
    - snoscan ==0.9.1
    - perl ==5.26.2
    - perl-bioperl-core ==1.007002
    - perl-bit-vector ==7.4
    - perl-dbd-pg ==3.8.1
    - perl-dbd-sqlite ==1.64
    - perl-dbi ==1.642
    - perl-file-which ==1.23
    - perl-io-all ==0.87
    - perl-io-prompt ==0.997004
    - perl-inline-c ==0.78
    - perl-perlio-gzip ==0.20
    - perl-forks ==0.36
    - perl-list-moreutils ==0.428
    - perl-perl-unsafe-signals ==0.03
    - mpich ==3.3.1
    - trnascan-se ==1.3.1
    - postgresql ==11.5
  run:
    - augustus ==3.2.3
    - blast {{ blast_version }}
    - exonerate ==2.4.0
    - infernal ==1.1.2
    - mir-prefer ==0.24
    - repeatmasker ==4.0.9_p2
    - rmblast {{ blast_version }} # blast and rmblast must be pinned to the same version as they share some libraries
    - snap ==2013_11_29
    - snoscan ==0.9.1
    - perl ==5.26.2
    - perl-bioperl-core ==1.007002
    - perl-bit-vector ==7.4
    - perl-dbd-pg ==3.8.1
    - perl-dbd-sqlite ==1.64
    - perl-dbi ==1.642
    - perl-file-which ==1.23
    - perl-io-all ==0.87
    - perl-io-prompt ==0.997004
    - perl-inline-c ==0.78
    - perl-perlio-gzip ==0.20
    - perl-forks ==0.36
    - perl-list-moreutils ==0.428
    - perl-perl-unsafe-signals ==0.03
    - mpich ==3.3.1
    - trnascan-se ==1.3.1
    - postgresql ==11.5
    # GeneMarkS, GeneMark-ES and FGENESH are optional requirements but are not free

about:
  home: http://www.yandell-lab.org/software/maker.html
  license: GPL3
  license_file: LICENSE
  summary: MAKER is a portable and easily configurable genome annotation pipeline.

test:
  commands:
    - maker --version

extra:
  container:
    # mpich needs /etc/resolv.conf : https://github.com/bioconda/bioconda-recipes/issues/11583
    extended-base: true
  identifiers:
    - biotools:maker
