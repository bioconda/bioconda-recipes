{% set blast_version = "2.9.0" %}

package:
  name: maker
  version: 2.31.10

source:
  url: http://yandell.topaz.genetics.utah.edu/maker_downloads/static/maker-2.31.10.tgz
  md5: 30e3ff1b4bad0218ebf20d049638e864
  patches:
    - "repeatmasker_check.patch"
    - "mpi_init.patch"

build:
  noarch: generic
  number: 15

requirements:
  host:
    - augustus ==3.2.3=pl526hcfae127_5
    - blast {{ blast_version }}
    - exonerate ==2.4.0=hb9dd440_2
    - infernal ==1.1.2=h14c3975_2
    - mir-prefer ==0.24=py27_2
    - repeatmasker ==4.0.9_p2=pl526_0
    - snap ==2013_11_29=h516909a_2
    - snoscan ==0.9.1=pl526h14c3975_0
    - perl ==5.26.2=h516909a_1006
    - perl-bioperl-core ==1.007002=pl526_1
    - perl-bit-vector ==7.4=pl526_2
    - perl-dbd-pg ==3.8.1=pl526h14c3975_0
    - perl-dbd-sqlite ==1.64=pl526h516909a_0
    - perl-dbi ==1.642=pl526_0
    - perl-file-which ==1.23=pl526_0
    - perl-io-all ==0.87=pl526_0
    - perl-io-prompt ==0.997004=pl526_2
    - perl-inline-c ==0.78=pl526h14c3975_1
    - perl-perlio-gzip ==0.20=pl526h84994c4_1
    - perl-forks ==0.36=pl526_4
    - perl-list-moreutils ==0.428=pl526_1
    - perl-perl-unsafe-signals ==0.03=pl526h6bb024c_3
    - mpich ==3.3.1=hc856adb_1
    - trnascan-se ==1.3.1=pl526h84994c4_5
    - postgresql ==11.5=hc63931a_1
  run:
    - augustus ==3.2.3=pl526hcfae127_5
    - blast {{ blast_version }}
    - exonerate ==2.4.0=hb9dd440_2
    - infernal ==1.1.2=h14c3975_2
    - mir-prefer ==0.24=py27_2
    - repeatmasker ==4.0.9_p2=pl526_0
    - rmblast {{ blast_version }} # blast and rmblast must be pinned to the same version as they share some libraries
    - snap ==2013_11_29=h516909a_2
    - snoscan ==0.9.1=pl526h14c3975_0
    - perl ==5.26.2=h516909a_1006
    - perl-bioperl-core ==1.007002=pl526_1
    - perl-bit-vector ==7.4=pl526_2
    - perl-dbd-pg ==3.8.1=pl526h14c3975_0
    - perl-dbd-sqlite ==1.64=pl526h516909a_0
    - perl-dbi ==1.642=pl526_0
    - perl-file-which ==1.23=pl526_0
    - perl-io-all ==0.87=pl526_0
    - perl-io-prompt ==0.997004=pl526_2
    - perl-inline-c ==0.78=pl526h14c3975_1
    - perl-perlio-gzip ==0.20=pl526h84994c4_1
    - perl-forks ==0.36=pl526_4
    - perl-list-moreutils ==0.428=pl526_1
    - perl-perl-unsafe-signals ==0.03=pl526h6bb024c_3
    - mpich ==3.3.1=hc856adb_1
    - trnascan-se ==1.3.1=pl526h84994c4_5
    - postgresql ==11.5=hc63931a_1
    # GeneMarkS, GeneMark-ES and FGENESH are optional requirements but are not free

about:
  home: http://www.yandell-lab.org/software/maker.html
  license: GPL3
  license_file: LICENSE
  summary: MAKER is a portable and easily configurable genome annotation pipeline.

test:
  commands:
    - maker --version

extra:
  container:
    # mpich needs /etc/resolv.conf : https://github.com/bioconda/bioconda-recipes/issues/11583
    extended-base: true
  identifiers:
    - biotools:maker
