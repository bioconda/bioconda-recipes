--- a/lib/GI.pm
+++ b/lib/GI.pm
@@ -3845,7 +3845,7 @@ sub set_defaults {
       my @all_alts = grep {-f $_ && -x $_} (File::Glob::bsd_glob("{$FindBin::RealBin/../exe/*/*,$FindBin::RealBin/../exe/*/bin/*}"));
       foreach my $exe (@exes) {
 	  my @alts = grep {/\/$exe$/} @all_alts;
-	  my $loc = shift @alts || File::Which::which($exe) || '';
+	  my $loc = shift @alts || File::Which::which($exe eq 'evm' ? 'evidence_modeler.pl' : $exe) || '';
 	  if(! $loc && $exe eq 'blasta'){ #find blasta using blastx
 	      ($loc) = (map {Cwd::abs_path($_)} grep {Cwd::abs_path($_) =~ /blasta$/} (File::Which::where('blastx')));
 	  }
@@ -4950,33 +4950,14 @@ sub load_control_files {
    confess "ERROR: Could not build output directory $CTL_OPT{out_base}\n"
         if(! -d $CTL_OPT{out_base});
 
-   #--make sure repbase is installed
-   if($CTL_OPT{model_org}){
+   #--make sure DFam is installed
+   if($CTL_OPT{model_org} and !defined($ENV{'LIBDIR'})){
        my $exe = Cwd::abs_path($CTL_OPT{RepeatMasker});
        my ($lib) = $exe =~ /(.*\/)RepeatMasker$/;
-       die "ERROR: Could not determine if RepBase is installed\n" if(! $lib);
+       die "ERROR: Could not determine if DFam is installed\n" if(! $lib);
 
-       $lib .= "Libraries/RepeatMaskerLib.embl";
-       die "ERROR: Could not determine if RepBase is installed\n" if(! -f $lib);
-
-       open(my $IN, "< $lib");
-       my $rb_flag;
-       for(my $i = 0; $i < 20; $i++){
-           my $line = <$IN>;
-           if($line =~ /RELEASE \d+(\-min)?\;/){
-	       $rb_flag = ($1 && $1 eq '-min') ? 0 : 1;
-	       last;
-           }
-       }
-       close($IN);
-
-       if(! $rb_flag){
-	   warn "WARNING: RepBase is not installed for RepeatMasker. This limits\n".
-	       "RepeatMasker's functionality and makes the model_org option in the\n".
-	       "control files virtually meaningless. MAKER will now reconfigure\n".
-	       "for simple repeat masking only.\n";
-	   $CTL_OPT{model_org} = 'simple';
-       }
+       $lib .= "../share/RepeatMasker/Libraries/RepeatMaskerLib.h5";
+       die "ERROR: Could not determine if DFam is installed\n" if(! -f $lib);
    }
 
    #--set an initialization lock so steps are locked to a single process
@@ -5196,7 +5177,7 @@ sub generate_control_files {
        print OUT "protein_gff=$O{protein_gff}  #aligned protein homology evidence from an external GFF3 file\n";
        print OUT "\n";
        print OUT "#-----Repeat Masking (leave values blank to skip repeat masking)\n";
-       print OUT "model_org=$O{model_org} #select a model organism for RepBase masking in RepeatMasker\n";
+       print OUT "model_org=$O{model_org} #select a model organism for DFam masking in RepeatMasker\n";
        print OUT "rmlib=$O{rmlib} #provide an organism specific repeat library in fasta format for RepeatMasker\n";
        print OUT "repeat_protein=$O{repeat_protein} #provide a fasta file of transposable element proteins for RepeatRunner\n";
        print OUT "rm_gff=$O{rm_gff} #pre-identified repeat elements from an external GFF3 file\n";
