{% set github_author = "bioinformed" %}
{% set name = "vgraph" %}
{% set version = "1.2.0" %}
# held back until github archives work
#{% set sha256 = "52a2c85165c75dd6052a07cc31dcf1b10ffde623b4e4423433a35bc726b005f0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  #held back until github archives work
  #fn: {{ name }}-{{ version }}.tar.gz
  #url: http://github.com/{{ github_author }}/{{ name }}/archive/v{{ version }}.tar.gz
  #sha256: {{ sha256 }}
  git_url: https://github.com/{{ github_author }}/{{ name }}.git
  git_rev: v{{ version }} 
  patches:
    - setup_py.patch

build:
  number: 0
  skip: True  # [py<35 and py==36]
  script: python setup.py install --single-version-externally-managed --record record.txt

requirements:
  build:
    - python
    - setuptools
    - setuptools_scm 1.15.0
    - setuptools_scm_git_archive 1.0
    - cython
    - pysam
  run:
    - python
    - pysam

test:
  commands:
    - vgraph --help
  imports:
    - vgraph
    - vgraph
    - vgraph.bed
    - vgraph.dbmatch
    - vgraph.graph
    - vgraph.intervals
    - vgraph.iterstuff
    - vgraph.lazy_fasta
    - vgraph.linearmatch
    - vgraph.lru_cache
    - vgraph.match
    - vgraph.norm
    - vgraph.repmatch
    - vgraph.smartfile
    - vgraph.vgraph

about:
  home: https://github.com/bioinformed/vgraph
  license: Apache-2.0
  license_file: LICENSE.txt
  summary: 'A command line application and Python library to compare genetic variants using variant graphs.'

  description: |
    vgraph is a command line application and Python library to compare genetic variants
    using variant graphs. `vgraph` utilizes a graph representation of genomic variants in to
    precisely compare complex variants that are refractory to comparison by conventional
    comparison methods.
  doc_url: https://github.com/bioinformed/vgraph
  dev_url: https://github.com/bioinformed/vgraph


extra:
  skip-lints:
    - uses_git_url
    - missing_hash
