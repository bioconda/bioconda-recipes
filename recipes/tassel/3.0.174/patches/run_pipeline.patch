--- run_pipeline.pl	2017-11-24 10:45:25.000000000 +1300
+++ run_pipeline.pl	2017-11-24 11:27:01.811168000 +1300
@@ -1,9 +1,11 @@
-#!/usr/bin/perl -w
+#!/usr/bin/env perl -w
 
 use strict;
 use File::Basename;
+use Cwd 'abs_path';
 
-my $dirname = dirname(__FILE__);
+my $filepath = abs_path(__FILE__);
+my $dirname = dirname($filepath);
 my $top = defined($dirname) ? $dirname : '.';
 
 my $libdir = "$top/lib";
