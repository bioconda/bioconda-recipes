{% set version = "1.0.7.5" %}

package:
  name: jamm
  version: {{ version }}

source:
  fn: JAMMv{{ version }}.tar.gz
  url: https://github.com/mahmoudibrahim/JAMM/archive/JAMMv{{ version }}.tar.gz
  sha256: 0625f7f5c922c8e12da916645a5e272979b486af1f32ca374b3d68a6ec65374b
  patches:
    - setpath.patch

build:
  number: 1

requirements:

  run:
    - perl
    - r-signal
    - r-mclust >=4

test:
  requires:
    - wget
  commands:
    - JAMM.sh | grep JAMM > /dev/null
    - SignalGenerator.sh | grep JAMM > /dev/null
    - wget -P testdata bioinf.uni-freiburg.de/~maticzkd/jamm_testdata/ctcfRep1.chr21.bed
    - wget -P testdata bioinf.uni-freiburg.de/~maticzkd/jamm_testdata/ctcfRep1.chr21.bed
    - wget bioinf.uni-freiburg.de/~maticzkd/jamm_testdata/chrSizes21.csize
    - time bash JAMM.sh -s testdata -g chrSizes21.csize -o jamm_out
    - ls jamm_out/peaks/all.peaks.narrowPeak # non-zero return if file not found

about:
  home: https://github.com/mahmoudibrahim/JAMM
  license: GPL
  license_file: LICENSE
  summary: JAMM is a peak finder for NGS datasets (ChIP-Seq, ATAC-Seq, DNase-Seq..etc.) that can integrate replicates and assign peak boundaries accurately.
