{% set version = "1.6.0" %}
{% set name = "Damsel" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: 91b5f137f757e7eddfa2a5b38d710fe7

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-damsel", max_pin="x.x") }}'
  noarch: generic

# Suggests: BiocStyle, biomaRt, biovizBase, BSgenome.Dmelanogaster.UCSC.dm6, knitr, limma, org.Dm.eg.db, rmarkdown, testthat (>= 3.0.0), TxDb.Dmelanogaster.UCSC.dm6.ensGene
requirements:

  host:
    - bioconductor-annotationdbi >=1.72.0,<1.73.0
    - bioconductor-biostrings >=2.78.0,<2.79.0
    - bioconductor-complexheatmap >=2.26.0,<2.27.0
    - bioconductor-edger >=4.8.0,<4.9.0
    - bioconductor-genomeinfodb >=1.46.0,<1.47.0
    - bioconductor-genomicfeatures >=1.62.0,<1.63.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-ggbio >=1.58.0,<1.59.0
    - bioconductor-goseq >=1.62.0,<1.63.0
    - bioconductor-plyranges >=1.30.0,<1.31.0
    - bioconductor-rsamtools >=2.26.0,<2.27.0
    - bioconductor-rsubread >=2.24.0,<2.25.0
    - r-base
    - r-dplyr
    - r-ggplot2
    - r-magrittr
    - r-patchwork
    - r-reshape2
    - r-rlang
    - r-stringr
    - r-tidyr

  run:
    - bioconductor-annotationdbi >=1.72.0,<1.73.0
    - bioconductor-biostrings >=2.78.0,<2.79.0
    - bioconductor-complexheatmap >=2.26.0,<2.27.0
    - bioconductor-edger >=4.8.0,<4.9.0
    - bioconductor-genomeinfodb >=1.46.0,<1.47.0
    - bioconductor-genomicfeatures >=1.62.0,<1.63.0
    - bioconductor-genomicranges >=1.62.0,<1.63.0
    - bioconductor-ggbio >=1.58.0,<1.59.0
    - bioconductor-goseq >=1.62.0,<1.63.0
    - bioconductor-plyranges >=1.30.0,<1.31.0
    - bioconductor-rsamtools >=2.26.0,<2.27.0
    - bioconductor-rsubread >=2.24.0,<2.25.0
    - r-base
    - r-dplyr
    - r-ggplot2
    - r-magrittr
    - r-patchwork
    - r-reshape2
    - r-rlang
    - r-stringr
    - r-tidyr

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: MIT + file LICENSE
  summary: 'Damsel: an end to end analysis of DamID'
  description: Damsel provides an end to end analysis of DamID data. Damsel takes bam files from Dam-only control and fusion samples and counts the reads matching to each GATC region. edgeR is utilised to identify regions of enrichment in the fusion relative to the control. Enriched regions are combined into peaks, and are associated with nearby genes. Damsel allows for IGV style plots to be built as the results build, inspired by ggcoverage, and using the functionality and layering ability of ggplot2. Damsel also conducts gene ontology testing with bias correction through goseq, and future versions of Damsel will also incorporate motif enrichment analysis. Overall, Damsel is the first package allowing for an end to end analysis with visual capabilities. The goal of Damsel was to bring all the analysis into one place, and allow for exploratory analysis within R.
  license_file: LICENSE

