{% set version = "1.4.0" %}
{% set name = "SpaNorm" %}
{% set bioc = "3.22" %}

package:
  name: bioconductor-{{ name|lower }}
  version: '{{ version }}'

source:
  url:
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/{{ name }}_{{ version }}.tar.gz
    - https://bioconductor.org/packages/{{ bioc }}/bioc/src/contrib/Archive/{{ name }}/{{ name }}_{{ version }}.tar.gz
    - https://bioarchive.galaxyproject.org/{{ name }}_{{ version }}.tar.gz
    - https://depot.galaxyproject.org/software/bioconductor-{{ name|lower }}/bioconductor-{{ name|lower }}_{{ version }}_src_all.tar.gz
  md5: c0d37183bccf9e1609f7b29b85c4443e

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  run_exports: '{{ pin_subpackage("bioconductor-spanorm", max_pin="x.x") }}'
  noarch: generic

# Suggests: testthat (>= 3.0.0), knitr, rmarkdown, prettydoc, pkgdown, covr, BiocStyle, Seurat, patchwork, ggforce, ggnewscale
requirements:
  host:
    - bioconductor-edger >=4.8.0,<4.9.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-scran >=1.38.0,<1.39.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-ggplot2
    - r-matrix
    - r-matrixstats
    - r-rlang
    - r-seuratobject
  run:
    - bioconductor-edger >=4.8.0,<4.9.0
    - bioconductor-s4vectors >=0.48.0,<0.49.0
    - bioconductor-scran >=1.38.0,<1.39.0
    - bioconductor-singlecellexperiment >=1.32.0,<1.33.0
    - bioconductor-spatialexperiment >=1.20.0,<1.21.0
    - bioconductor-summarizedexperiment >=1.40.0,<1.41.0
    - r-base
    - r-ggplot2
    - r-matrix
    - r-matrixstats
    - r-rlang
    - r-seuratobject

test:
  commands:
    - $R -e "library('{{ name }}')"

about:
  home: https://bioconductor.org/packages/{{ bioc }}/bioc/html/{{ name }}.html
  license: GPL (>= 3)
  summary: Spatially-aware normalisation for spatial transcriptomics data
  description: This package implements the spatially aware library size normalisation algorithm, SpaNorm. SpaNorm normalises out library size effects while retaining biology through the modelling of smooth functions for each effect. Normalisation is performed in a gene- and cell-/spot- specific manner, yielding library size adjusted data.
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

