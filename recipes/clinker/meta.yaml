{% set version = "1.33" %}

package:
  name: clinker
  version: {{ version }}

source:
  url: https://github.com/Oshlack/Clinker/archive/v{{ version }}.tar.gz
  sha256: bc2eb7b38fcfb13727bfdbd610b63002289811605cd995e7fd24b8db02b7e018

build:
  number: 1
  noarch: generic
  run_exports:
    - {{ pin_subpackage('bayestyper', max_pin="x.x") }}
  # Cleaning up the build container fails somehow
  # PermissionError: [Errno 13] Permission denied: 'jobs'
  # skip: True  # [linux]

requirements:
  run:
    - samtools
    - bpipe
    - star
    - bioconductor-gviz
    - bioconductor-biomart
    - python 

test:
  commands:
    - clinker -h
      #- cd /tmp && bpipe --help

about:
  home: https://github.com/Oshlack/Clinker
  summary: "Clinker is a bioinformatics pipeline that generates a superTranscriptome from popular fusion finder outputs (JAFFA, tophatFusion, SOAP, deFUSE, Pizzly, etc), that can be then be either viewed in genome viewers such as IGV or through the included plotting feature developed with GViz."
  license: MIT
  license_file: LICENSE
 
extra:
  notes: "Wrapper script provided to indicate clinker is a bpipe pipeline, provide example command from wiki, and also a passthrough option."
  additional-platforms:
    - linux-aarch64
