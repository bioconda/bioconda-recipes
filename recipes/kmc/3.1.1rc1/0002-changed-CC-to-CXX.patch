From 1e3794b1282cf4385933638b3e7c3e6e540502fb Mon Sep 17 00:00:00 2001
From: Ilya Shlyakhter <ilya@broadinstitute.org>
Date: Tue, 17 Jul 2018 17:35:03 -0400
Subject: [PATCH 2/2] changed CC to CXX

---
 makefile | 34 +++++++++++++++++-----------------
 1 file changed, 17 insertions(+), 17 deletions(-)

diff --git a/makefile b/makefile
index d36e48d..6ec0c9c 100644
--- a/makefile
+++ b/makefile
@@ -6,12 +6,12 @@ KMC_API_DIR = kmc_api
 KMC_DUMP_DIR = kmc_dump
 KMC_TOOLS_DIR = kmc_tools
 
-CC 	= g++
-CFLAGS	= -Wall -O3 -m64 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++11 
-CLINK	= -lm -O3 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++11 
+CXX 	= g++
+CXXFLAGS	= -Wall -O3 -m64 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++11 
+LDFLAGS	= -lm -O3 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++11 
 
-KMC_TOOLS_CFLAGS	= -Wall -O3 -m64 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++14
-KMC_TOOLS_CLINK	= -lm -O3 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++14
+KMC_TOOLS_CXXFLAGS	= -Wall -O3 -m64 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++14
+KMC_TOOLS_LDFLAGS	= -lm -O3 -Wl,--whole-archive -pthread -Wl,--no-whole-archive -std=c++14
 
 DISABLE_ASMLIB = false
 
@@ -62,8 +62,8 @@ $(KMC_TOOLS_DIR)/percent_progress.o
 KMC_TOOLS_LIBS = -lz -lbz2
 
 ifeq ($(DISABLE_ASMLIB),true)
-	CFLAGS += -DDISABLE_ASMLIB
-	KMC_TOOLS_CFLAGS += -DDISABLE_ASMLIB
+	CXXFLAGS += -DDISABLE_ASMLIB
+	KMC_TOOLS_CXXFLAGS += -DDISABLE_ASMLIB
 else
 	KMC_LIBS += \
 	$(KMC_MAIN_DIR)/libs/libaelf64.a 
@@ -72,32 +72,32 @@ else
 endif 	
 
 $(KMC_OBJS) $(KMC_DUMP_OBJS) $(KMC_API_OBJS): %.o: %.cpp
-	$(CC) $(CFLAGS) -c $< -o $@
+	$(CXX) $(CXXFLAGS) -c $< -o $@
 
 $(KMC_TOOLS_OBJS): %.o: %.cpp
-	$(CC) $(KMC_TOOLS_CFLAGS) -c $< -o $@
+	$(CXX) $(KMC_TOOLS_CXXFLAGS) -c $< -o $@
 
 $(KMC_MAIN_DIR)/raduls_sse2.o: $(KMC_MAIN_DIR)/raduls_sse2.cpp
-	$(CC) $(CFLAGS) -msse2 -c $< -o $@
+	$(CXX) $(CXXFLAGS) -msse2 -c $< -o $@
 $(KMC_MAIN_DIR)/raduls_sse41.o: $(KMC_MAIN_DIR)/raduls_sse41.cpp
-	$(CC) $(CFLAGS) -msse4.1 -c $< -o $@
+	$(CXX) $(CXXFLAGS) -msse4.1 -c $< -o $@
 $(KMC_MAIN_DIR)/raduls_avx.o: $(KMC_MAIN_DIR)/raduls_avx.cpp
-	$(CC) $(CFLAGS) -mavx -fabi-version=0 -c $< -o $@
+	$(CXX) $(CXXFLAGS) -mavx -fabi-version=0 -c $< -o $@
 $(KMC_MAIN_DIR)/raduls_avx2.o: $(KMC_MAIN_DIR)/raduls_avx2.cpp
-	$(CC) $(CFLAGS) -mavx2 -mfma -fabi-version=0 -c $< -o $@
+	$(CXX) $(CXXFLAGS) -mavx2 -mfma -fabi-version=0 -c $< -o $@
 $(KMC_MAIN_DIR)/instrset_detect.o: $(KMC_MAIN_DIR)/libs/vectorclass/instrset_detect.cpp
-	$(CC) $(CFLAGS) -c $< -o $@
+	$(CXX) $(CXXFLAGS) -c $< -o $@
 
 kmc: $(KMC_OBJS) $(RADULS_OBJS) $(KMC_MAIN_DIR)/instrset_detect.o 
 	-mkdir -p $(KMC_BIN_DIR)
-	$(CC) $(CLINK) -o $(KMC_BIN_DIR)/$@ $^ $(KMC_LIBS)
+	$(CXX) $(LDFLAGS) -o $(KMC_BIN_DIR)/$@ $^ $(KMC_LIBS)
 kmc_dump: $(KMC_DUMP_OBJS) $(KMC_API_OBJS)
 	-mkdir -p $(KMC_BIN_DIR)
-	$(CC) $(CLINK) -o $(KMC_BIN_DIR)/$@ $^
+	$(CXX) $(LDFLAGS) -o $(KMC_BIN_DIR)/$@ $^
 
 kmc_tools: $(KMC_TOOLS_OBJS) $(KMC_API_OBJS)
 	-mkdir -p $(KMC_BIN_DIR)
-	$(CC) $(KMC_TOOLS_CLINK) -o $(KMC_BIN_DIR)/$@ $^ $(KMC_TOOLS_LIBS)
+	$(CXX) $(KMC_TOOLS_LDFLAGS) -o $(KMC_BIN_DIR)/$@ $^ $(KMC_TOOLS_LIBS)
 
 clean:
 	-rm $(KMC_MAIN_DIR)/*.o
-- 
2.14.4

