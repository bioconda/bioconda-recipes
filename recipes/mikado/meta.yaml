{% set name = "mikado" %}
{% set version = "2.3.5rc3" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/EI-CoreBioinformatics/mikado/archive/refs/tags/v{{ version }}.tar.gz
  sha256: ad541944a451b5ea1b18dc8598110bf4477bd0bba6921ada0001271045f6f335

build:
  number: 0
  entry_points:
    - mikado = Mikado.__main__:main
  script: {{ PYTHON }} -m pip install . --no-deps --no-build-isolation --no-cache-dir --use-pep517 -vvv
  run_exports:
    - {{ pin_subpackage(name, max_pin="x") }}

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - pkg-config
  host:
    - python >3.8,<3.11
    - pip
    - setuptools <80.9
    - cython ==0.29.32
    - numpy ==1.23.3
    - scipy ==1.11.1
  run:
    - python >3.8,<3.11
    - biopython ==1.79
    - datrie >=0.8
    - docutils ==0.19
    - drmaa ==0.7.9
    - hypothesis ==6.56.2
    - marshmallow ==3.14.1
    - marshmallow-dataclass ==8.5.3
    - msgpack-python ==1.0.4
    - networkx ==2.8.7
    - numpy ==1.23.3
    - pandas ==1.5.0
    - pyfaidx ==0.5.9.5
    - pysam ==0.23.3
    - pytest ==7.1.3
    - python-rapidjson ==1.9
    - pyyaml ==6.0.1
    - scipy ==1.11.1
    - snakemake ==6.15.5
    - sqlalchemy ==1.4.41
    - sqlalchemy-utils ==0.38.3
    - sqlite
    - tabulate ==0.9.0
    - toml ==0.10.2
    - typeguard ==2.13.3
    # External Bio-tools
    - samtools >=1.11
    - htslib >=1.11
    - prodigal ==2.6.3
    - diamond ==2.1.16
    - portcullis ==1.2.4

test:
  imports:
    - Mikado
    - Mikado.configuration
    - Mikado.loci
  commands:
    - mikado --help

about:
  home: "https://github.com/EI-CoreBioinformatics/mikado"
  summary: "A Python3 annotation program to select the best gene model in each locus."
  license: "LGPL-3.0-or-later"
  license_family: LGPL
  license_file: "LICENSE.txt"
  dev_url: "https://github.com/EI-CoreBioinformatics/mikado"
  doc_url: "https://mikado.readthedocs.io/en/stable"

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
  recipe-maintainers:
    - lucventurini
    - ljyanesm
    - gemygk
    - swarbred
  identifiers:
    - biotools:mikado