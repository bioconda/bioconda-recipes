{% set name = "libvips" %}
{% set version = "8.6.3" %}
{% set sha256 = "f85adbb9f5f0f66b34a40fd2d2e60d52f6e992831f54af706db446f582e10992" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: vips-{{ version }}.tar.gz
  url: https://github.com/jcupitt/libvips/releases/download/v{{ version }}/vips-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  skip: true  # [win or osx]

requirements:
  build:
    - gcc
    - make
    - python
    - cfitsio 
    - fftw
    - giflib
    - gobject-introspection
    - graphicsmagick
    - lcms
    - libjpeg-turbo
    - libmatio
    - libpng
    - libtiff
    - libwebp
    - openslide
    - pkg-config
    - poppler
    - pygobject
    - hdf5 {{CONDA_HDF5}}*
    - xorg-libxrender
# Missing packages in defaults, bioconda and conda-forge:
#    - libexif # https://github.com/jcupitt/libvips/issues/673
#    - libgsf  # https://github.com/jcupitt/libvips/issues/673
#    - librsvg # http://jcupitt.github.io/libvips/install.html
#    - openexr  # http://jcupitt.github.io/libvips/install.html
#    - orc      # http://jcupitt.github.io/libvips/install.html
#    - pangoft2 # http://jcupitt.github.io/libvips/install.html
  run:
    - libgcc
    - python
    - cfitsio
    - fftw
    - giflib
    - gobject-introspection
    - graphicsmagick
    - lcms
    - libjpeg-turbo
    - libmatio
    - libpng
    - libtiff
    - libwebp
    - openslide
    - pkg-config
    - poppler
    - pygobject
    - hdf5 {{ CONDA_HDF5 }}*
    - xorg-libxrender
# Missing packages in defaults, bioconda and conda-forge:
#    - libexif # https://github.com/jcupitt/libvips/issues/673
#    - libgsf  # https://github.com/jcupitt/libvips/issues/673
#    - librsvg # http://jcupitt.github.io/libvips/install.html
#    - openexr  # http://jcupitt.github.io/libvips/install.html
#    - orc      # http://jcupitt.github.io/libvips/install.html
#    - pangoft2 # http://jcupitt.github.io/libvips/install.html

test:
  commands:
    - vips --version

about:
  home: https://jcupitt.github.io/libvips
  license: LGPL-2.1
  license_family: LGPL
  license_file: COPYING
  summary: 'A fast image processing library with low memory needs'

  description: |
    libvips is a demand-driven, horizontally threaded image processing
    library. Compared to similar libraries, libvips runs quickly and uses
    little memory.

    It has around 300 operations covering arithmetic, histograms, convolution,
    morphological operations, frequency filtering, colour, resampling, statistics
    and others. It supports a large range of numeric formats, from 8-bit int to
    128-bit complex. Images can have any number of bands. It supports a good range
    of image formats, including JPEG, TIFF, OME-TIFF, PNG, WebP, FITS, Matlab,
    OpenEXR, PDF, SVG, HDR, PPM, CSV, GIF, Analyze, DeepZoom, and OpenSlide. It can
    also load images via ImageMagick or GraphicsMagick, letting it load formats like DICOM.

    It comes with bindings for C, C++, Python and the command-line. Full bindings are
    available for Ruby, PHP, Go, and Lua. libvips is used as an image processing engine
    by sharp (on node.js), bimg, sharp for Go, carrierwave-vips, mediawiki, PhotoFlow
    and others. The official libvips GUI is nip2, a strange combination of a spreadsheet
    and an photo editor.

  doc_url: https://jcupitt.github.io/libvips/API/current
  dev_url: https://github.com/jcupitt/libvips

extra:
  recipe-maintainers:
    - sebastian-luna-valero
    - strets123

