{% set name = "pear" %}
{% set version = "0.9.6" %}

package:
  name: {{ name }}
  version: {{ version|replace("-", "_") }}

source:
  url: https://depot.galaxyproject.org/software/{{ name }}/{{ name }}_{{ version }}_src_all.tar.gz
  sha256: f7728371e26a5b46fa928b0f7ae1b552ed6a78815b117ba48ef1af98e96c8e2b
  patches:
    - patches/0001-skip-unused-asm-code.patch

build:
  number: 13
  run_exports:
    - {{ pin_subpackage(name, max_pin = "x.x") }}

requirements:
  build:
    - {{ compiler('c') }}
    - make
    - pkgconfig
  host:
    - bzip2
    - zlib

test:
  commands:
    - pear 2>&1 | grep "PEAR v{{ version }}"
    - pearRM 2>&1 | grep "PEAR v{{ version }}"

about:
  home: https://sco.h-its.org/exelixis/web/software/pear/
  license: CC-BY-NC-SA-3.0
  license_file: LICENSE.txt
  summary: Paired-End reAd mergeR

extra:
  additional-platforms:
    - linux-aarch64
    - osx-arm64
  identifiers:
    - biotools:PEAR
  recipe-maintainers:
    - mfansler
