{% set version = "0.1.0" %}

package: 
  name: poolsnp
  version: {{ version }}

source:
  git_url: https://github.com/capoony/PoolSNP.git                            # Asked authors for a release
  sha256: c630eb7d44805636322839e245fb7f566af737513a3170396b62a50018aa0008

requirements:
  host:
    - python
    - parallel
  run:
    - python
    - parallel
  
build:
  number: 0
  noarch: python
  run_exports:
    - {{ pin_subpackage('poolsnp', max_pin='x.x') }}

test:
  source_files:
    - TestData/*
    - scripts/*
  commands:
    #- echo "Find TestData path"
    #- find TestData -type f -exec echo $(pwd)/{} \;
    #- echo "Find scripts path"
    #- find scripts -type f -exec echo $(pwd)/{} \;
    #- echo "$SRC_DIR"
    #- echo "Check contents of TestData/test.sh"
    #- cat $PREFIX/share/PoolSNP/TestData/test.sh
    #- echo "Replacing paths"
    - sed -i.bak "s|TestData/|$PREFIX/share/PoolSNP/TestData/|g" $PREFIX/share/PoolSNP/TestData/test.sh
    - chmod +x $PREFIX/share/PoolSNP/TestData/test.sh
    #- echo "Check contents of TestData/test.sh"
    #- cat $PREFIX/share/PoolSNP/TestData/test.sh
    - $PREFIX/share/PoolSNP/TestData/test.sh

about: 
  summary: PoolSNP is a heuristic SNP caller, which uses an MPILEUP file and a reference genome in FASTA format as inputs.
  license: Apache-2.0
  license_file: LICENSE
  home: https://github.com/capoony/PoolSNP

extra:
  recipe-maintainers:
    - abhilesh
  skip-lints:
    - uses_vcs_url # Requested a release from author