{% set name = "pandepth" %}
{% set version = "2.26" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/HuiyangYu/PanDepth/releases/download/v{{ version }}/PanDepth-{{ version }}-Linux-x86_64.tar.gz
  sha256: "3c5e6b3cb093c25c9d20795efdf3a3c7685d7a35abc6abd328021732f00acde5"

build:
  number: 0
  binary_relocation: false
  skip: true
  script: |
    mkdir -p $PREFIX/bin
    cp pandepth $PREFIX/bin/
    chmod +x $PREFIX/bin/pandepth
    patchelf --set-rpath $PREFIX/lib $PREFIX/bin/pandepth

requirements:
  host:
    - patchelf
  run:
    - libgcc-ng
    - libstdcxx-ng
test:
  commands:
    - pandepth --help

about:
  home: https://github.com/HuiyangYu/PanDepth
  license: MIT
  summary: "PanDepth, an ultrafast and efficient genomic tool for coverage calculation"
  description: |
    PanDepth is an ultrafast and memory-efficient tool for calculating 
    genome coverage depth from sequencing data.
    Note: Requires Linux with glibc >=2.17.
  doc_url: https://github.com/HuiyangYu/PanDepth#readme
  dev_url: https://github.com/HuiyangYu/PanDepth
  cite: "Yu H, Shi C, He W, et al. PanDepth, an ultrafast and efficient genomic tool for coverage calculation[J]. Briefings in Bioinformatics, 2024, 25(3): bbae197."
