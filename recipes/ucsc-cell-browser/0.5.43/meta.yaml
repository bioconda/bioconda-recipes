{% set version = '0.5.43' %}
{% set name = "cellbrowser" %}

package:
  name: ucsc-cell-browser
  version: "{{ version }}"

source:
  url: "https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz"
  sha256: "adbd9bcf3eed4068f9487c5b8166982e250d501c3578f8e2ed897ad90ae14cf5"

build:
  number: 1
  entry_points:
    - cbBuild = cellbrowser.cellbrowser:cbBuildCli
    - cbScanpy = cellbrowser.cellbrowser:cbScanpyCli
    - cbSeurat = cellbrowser.seurat:cbSeuratCli
    - cbTool = cellbrowser.convert:cbToolCli
    - cbUpgrade = cellbrowser.cellbrowser:cbUpgradeCli
    - cbGuessGencode = cellbrowser.guessgenes:cbGuessGencodeCli
    - cbMarkerAnnotate = cellbrowser.geneinfo:cbMarkerAnnotateCli
    - cbImportScanpy = cellbrowser.convert:cbImportScanpyCli
    - cbImportSeurat = cellbrowser.seurat:cbImportSeurat2Cli
    - cbImportCellranger = cellbrowser.convert:cbCellrangerCli
  noarch: python
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed -vv"

requirements:
    host:
        - python >=3.6
        - pip
    run:
        - python >=3.6
        - numpy
        - anndata <0.7.0
        - h5py <2.10

test:
    imports:
        - RangeHTTPServer
        - cellbrowser
    commands:
        - which cbBuild
        - which cbGuessGencode
        - which cbMarkerAnnotate
        - which cbScanpy
        - which cbImportScanpy
        - which cbImportCellranger
        - which cbTool
        - which cbUpgrade

about:
  home: http://cells.ucsc.edu
  license: GPL
  license_file: LICENSE
  summary: A browser for single-cell data, main site at http://cells.ucsc.edu
