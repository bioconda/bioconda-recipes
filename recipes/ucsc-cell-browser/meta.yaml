{% set version = '1.2.4' %}
{% set name = "cellbrowser" %}

package:
  name: ucsc-cell-browser
  version: "{{ version }}"

source:
  url: "https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz"
  sha256: "9c7414dd377ce36c290b1eef0763d0e9d0b8fa9ddc697f6bcfd1e2efa49e67f9"

build:
  number: 0
  entry_points:
    - cbBuild = cellbrowser.cellbrowser:cbBuildCli
    - cbScanpy = cellbrowser.cellbrowser:cbScanpyCli
    - cbSeurat = cellbrowser.seurat:cbSeuratCli
    - cbTool = cellbrowser.convert:cbToolCli
    - cbUpgrade = cellbrowser.cellbrowser:cbUpgradeCli
    - cbGuessGencode = cellbrowser.guessgenes:cbGuessGencodeCli
    - cbMarkerAnnotate = cellbrowser.geneinfo:cbMarkerAnnotateCli
    - cbImportScanpy = cellbrowser.convert:cbImportScanpyCli
    - cbImportSeurat = cellbrowser.seurat:cbImportSeuratCli
    - cbImportCellranger = cellbrowser.convert:cbCellrangerCli
    - cbGenes = cellbrowser.genes:cbGenesCli
    - cbHub = cellbrowser.hubmaker:cbHubCli
  noarch: python
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed -vv"

requirements:
    host:
        - python >=3.6
        - pip
    run:
        - python >=3.6
        - numpy
        - anndata

test:
    imports:
        - RangeHTTPServer
        - cellbrowser
    commands:
        - which cbBuild
        - which cbGuessGencode
        - which cbMarkerAnnotate
        - which cbScanpy
        - which cbImportScanpy
        - which cbImportCellranger
        - which cbTool
        - which cbUpgrade
        - which cbHub
        - which cbGenes

about:
  home: http://cells.ucsc.edu
  license: GPL
  license_file: LICENSE
  summary: A browser for single-cell data, main site at http://cells.ucsc.edu. UCSC Cellbrowser, an interactive browser for single cell data. Includes importers and basic pipelines for text files, Seurat, Scanpy and Cellranger. All Javascript - does not require a server backend.
